var e=Object.defineProperty,s=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,n=(s,a,t)=>a in s?e(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,o=(e,s)=>{for(var a in s||(s={}))r.call(s,a)&&n(e,a,s[a]);if(l)for(var a of l(s))i.call(s,a)&&n(e,a,s[a]);return e},d=(e,t)=>s(e,a(t)),c=(e,s,a)=>new Promise((t,l)=>{var r=e=>{try{n(a.next(e))}catch(s){l(s)}},i=e=>{try{n(a.throw(e))}catch(s){l(s)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);n((a=a.apply(e,s)).next())});import{r as m,a as x,R as h}from"./vendor-BXk_ma1u.js";import{S as u,a as p,C as g,M as b,T as j,b as f,c as N,U as y,d as v,F as w,A as k,e as S,f as P,H as C,g as D,P as A,h as T,i as I,j as L,k as R,l as F,m as M,n as O,o as B,p as z,X as E,q as K,Z as $,r as U,s as V,t as H,u as q,v as _,L as J,w as G,x as W,y as X,D as Z,E as Y,z as Q,B as ee}from"./ui-CG5qKIIb.js";var se,ae,te=(se={"assets/index-i6LZ50HW.js"(e){!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();var s={exports:{}},a={},t=m,l=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,n=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,se={key:!0,ref:!0,__self:!0,__source:!0};function ae(e,s,a){var t,r={},o=null,d=null;for(t in void 0!==a&&(o=""+a),void 0!==s.key&&(o=""+s.key),void 0!==s.ref&&(d=s.ref),s)i.call(s,t)&&!se.hasOwnProperty(t)&&(r[t]=s[t]);if(e&&e.defaultProps)for(t in s=e.defaultProps)void 0===r[t]&&(r[t]=s[t]);return{$$typeof:l,type:e,key:o,ref:d,props:r,_owner:n.current}}a.Fragment=r,a.jsx=ae,a.jsxs=ae,s.exports=a;var te,le=s.exports,re=x;te=re.createRoot,re.hydrateRoot;const ie=m.createContext(void 0),ne=({children:e})=>{const[s,a]=m.useState([]),[t,l]=m.useState([]);return m.useEffect(()=>{const e=[{id:"AZF12345678",userId:"1",userName:"Siti Aminah",userEmail:"siti@example.com",items:[{productId:"2",productName:"Gamis Syari Elegant",selectedVariant:{size:"M",color:"Navy"},quantity:1,price:2e5,total:2e5}],shippingInfo:{name:"Siti Aminah",phone:"081234567890",address:"Jl. Merdeka No. 123, Jakarta Selatan",isDropship:!1},paymentMethod:"transfer",paymentProof:"bukti_transfer_123.jpg",paymentProofUrl:"https://images.pexels.com/photos/4386321/pexels-photo-4386321.jpeg?auto=compress&cs=tinysrgb&w=400",status:"awaiting_verification",totalAmount:2e5,shippingCost:15e3,finalTotal:215e3,createdAt:new Date(Date.now()-1728e5),updatedAt:new Date(Date.now()-1728e5)},{id:"AZF12345679",userId:"2",userName:"Fatimah Zahra",userEmail:"fatimah@example.com",items:[{productId:"1",productName:"Hijab Segi Empat Premium",selectedVariant:{size:"M",color:"Hitam"},quantity:2,price:65e3,total:13e4}],shippingInfo:{name:"Fatimah Zahra",phone:"081234567891",address:"Jl. Sudirman No. 456, Bandung",isDropship:!0,dropshipName:"Toko Hijab Cantik",dropshipPhone:"081234567892"},paymentMethod:"cash",status:"processing",totalAmount:13e4,shippingCost:15e3,finalTotal:145e3,createdAt:new Date(Date.now()-864e5),updatedAt:new Date(Date.now()-864e5)}];a(e)},[]),le.jsx(ie.Provider,{value:{orders:s,flashSales:t,addOrder:e=>{const s=d(o({},e),{createdAt:new Date,updatedAt:new Date});a(e=>[s,...e])},updateOrderStatus:(e,s)=>{a(a=>a.map(a=>a.id===e?d(o({},a),{status:s,updatedAt:new Date}):a))},updateOrderPayment:(e,s,t="pending")=>{a(a=>a.map(a=>a.id===e?d(o({},a),{paymentProof:s,paymentProofUrl:"https://images.pexels.com/photos/4386321/pexels-photo-4386321.jpeg?auto=compress&cs=tinysrgb&w=400",status:t,updatedAt:new Date}):a))},getOrdersByStatus:e=>s.filter(s=>s.status===e),getTotalRevenue:()=>s.filter(e=>"delivered"===e.status).reduce((e,s)=>e+s.finalTotal,0),getTodayOrders:()=>{const e=new Date;return e.setHours(0,0,0,0),s.filter(s=>s.createdAt>=e)},createFlashSale:e=>{const s=d(o({},e),{id:"FS"+Date.now().toString(),createdAt:new Date});console.log("Creating flash sale:",s),console.log("Flash sale products:",e.productIds),console.log("Discount:",e.discountType,e.discountValue),l(e=>{const a=[s,...e];return console.log("Updated flash sales:",a),a}),setTimeout(()=>{console.log("Dispatching flashSaleCreated event");const e=new CustomEvent("flashSaleCreated",{detail:s,bubbles:!0});window.dispatchEvent(e),console.log("Event dispatched")},100)},updateFlashSale:(e,s)=>{l(a=>a.map(a=>a.id===e?o(o({},a),s):a)),console.log("Updating flash sale:",e,s);const a=t.find(s=>s.id===e);a&&window.dispatchEvent(new CustomEvent("flashSaleUpdated",{detail:o(o({},a),s)}))},deleteFlashSale:e=>{const s=t.find(s=>s.id===e);s&&(console.log("Deleting flash sale:",s),window.dispatchEvent(new CustomEvent("flashSaleDeleted",{detail:s}))),l(s=>s.filter(s=>s.id!==e))},getActiveFlashSales:()=>{const e=new Date;return t.filter(s=>s.isActive&&s.startDate<=e&&s.endDate>=e)}},children:e})},oe=()=>{const e=m.useContext(ie);if(void 0===e)throw new Error("useAdmin must be used within an AdminProvider");return e};class de extends h.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){console.error("ErrorBoundary caught an error:",e,s)}render(){return this.state.hasError?this.props.fallback||le.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:le.jsxs("div",{className:"text-center",children:[le.jsx("div",{className:"text-red-500 mb-4",children:le.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:le.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),le.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Terjadi Kesalahan"}),le.jsx("p",{className:"text-gray-600 mb-4",children:"Mohon muat ulang halaman atau coba lagi nanti."}),le.jsx("button",{onClick:()=>window.location.reload(),className:"bg-pink-500 text-white px-6 py-2 rounded-lg hover:bg-pink-600 transition-colors",children:"Muat Ulang"})]})}):this.props.children}}const ce=({product:e,onProductClick:s,onAddToCart:a,isFlashSale:t=!1,isFeatured:l=!1,user:r})=>{const[i,n]=m.useState(!1),o=e=>{e.stopPropagation(),"reseller"!==(null==r?void 0:r.role)&&n(!i)},d=s=>{s.stopPropagation();const a=encodeURIComponent(`Halo Admin, saya tertarik dengan produk ${e.name} dan ingin menanyakan tentang harga reseller. Mohon info lebih lanjut. Terima kasih.`);window.open(`https://wa.me/6287815990944?text=${a}`,"_blank"),n(!1)};return le.jsxs("div",{onClick:()=>s(e),className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all duration-300 cursor-pointer group overflow-hidden "+(l?"ring-2 ring-yellow-400 shadow-lg":""),children:[le.jsxs("div",{className:"relative",children:[le.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300"}),(()=>{const s="ready"===e.status?`Ready (${e.stock})`:`PO (${e.stock})`;return le.jsx("div",{className:"absolute top-2 left-2 text-xs px-2 py-1 rounded font-medium "+("ready"===e.status?"bg-green-500 text-white":"bg-orange-500 text-white"),children:s})})(),l&&le.jsx("div",{className:"absolute top-2 right-2 bg-yellow-400 text-white p-1.5 rounded-full shadow-lg",children:le.jsx(u,{className:"w-4 h-4 fill-current"})}),le.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:le.jsx("button",{onClick:s=>{s.stopPropagation(),a(e)},className:"bg-pink-500 text-white p-2 rounded-full hover:bg-pink-600 transition-colors shadow-lg",children:le.jsx(p,{className:"w-4 h-4"})})})]}),le.jsxs("div",{className:"p-4",children:[le.jsx("h3",{className:"font-semibold text-gray-800 mb-2 line-clamp-2 group-hover:text-pink-600 transition-colors",children:e.name}),le.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),e.isFlashSale&&e.flashSalePrice>0?le.jsxs("div",{className:"space-y-1",children:[le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsxs("span",{className:"text-lg font-bold text-red-600",children:["Rp ",e.flashSalePrice.toLocaleString("id-ID")]}),le.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-1 rounded",children:["-",Math.round(100*(1-e.flashSalePrice/(e.originalRetailPrice||e.retailPrice))),"%"]})]}),le.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["Rp ",(e.originalRetailPrice||e.retailPrice).toLocaleString("id-ID")]})]}):le.jsxs("div",{className:"space-y-1 relative",children:[le.jsxs("div",{className:"text-lg font-bold text-pink-600",children:["Rp ",e.retailPrice.toLocaleString("id-ID")]}),le.jsxs("div",{className:"relative",children:["reseller"===(null==r?void 0:r.role)?le.jsxs("div",{className:"text-sm text-pink-600",children:["Reseller: Rp ",e.resellerPrice.toLocaleString("id-ID")]}):le.jsxs("button",{onClick:o,className:"text-sm text-pink-600 hover:text-pink-700 font-medium transition-colors flex items-center space-x-1",children:[le.jsxs("span",{children:["Reseller: Rp ",e.resellerPrice.toLocaleString("id-ID")]}),le.jsx(g,{className:"w-3 h-3 transition-transform "+(i?"rotate-180":"")})]}),i&&"reseller"!==(null==r?void 0:r.role)&&le.jsxs("div",{className:"absolute bottom-full left-0 right-0 mb-2 bg-white rounded-lg shadow-lg border border-gray-200 z-10",children:[le.jsxs("button",{onClick:d,className:"w-full px-3 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors flex items-center space-x-2 rounded-t-lg",children:[le.jsx(b,{className:"w-4 h-4 text-green-600"}),le.jsx("span",{children:"Info Reseller via WhatsApp"})]}),le.jsx("div",{className:"text-xs text-gray-500 px-3 pb-2 text-center",children:"Hubungi admin untuk harga reseller"})]})]})]})]})]})},me=({onBannerClick:e})=>{const[s,a]=m.useState(0),[t,l]=m.useState([]),r=[{id:"flashsale-default",title:"Flash Sale ⚡",image:"/api/placeholder/400/200",link:"/flash-sale",type:"flashsale"}];return m.useEffect(()=>{const e=localStorage.getItem("azzahra-banners");if(e)try{const s=JSON.parse(e);l([...r,...s])}catch(s){l(r)}else l(r)},[]),m.useEffect(()=>{if(t.length<=1)return;const e=setInterval(()=>{a(e=>(e+1)%t.length)},3e3);return()=>clearInterval(e)},[t.length]),0===t.length?null:le.jsxs("div",{className:"relative w-full h-48 md:h-56 lg:h-64 overflow-hidden rounded-lg",children:[le.jsx("div",{className:"relative h-full",children:t.map((a,t)=>le.jsx("div",{className:"absolute inset-0 transition-opacity duration-500 "+(t===s?"opacity-100":"opacity-0"),children:le.jsx("div",{className:"w-full h-full cursor-pointer "+("flashsale"===a.type?"bg-gradient-to-r from-red-500 to-pink-500":"bg-gradient-to-r from-purple-500 to-pink-500"),onClick:()=>(s=>{e&&e(s)})(a),children:le.jsx("div",{className:"flex items-center justify-center h-full p-8 text-white",children:le.jsxs("div",{className:"text-center",children:["flashsale"===a.type&&le.jsx(j,{className:"w-8 h-8 mx-auto mb-2"}),le.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:a.title}),"flashsale"===a.type&&le.jsx("p",{className:"text-red-100",children:"Diskon terbatas! Buruan sebelum kehabisan!"}),"promo"===a.type&&le.jsx("p",{className:"text-purple-100",children:"Promo spesial untuk Anda!"})]})})})},a.id))}),t.length>1&&le.jsxs(le.Fragment,{children:[le.jsx("button",{onClick:()=>{a(e=>(e-1+t.length)%t.length)},className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/30 rounded-full p-2 transition-colors",children:le.jsx(f,{className:"w-5 h-5 text-white"})}),le.jsx("button",{onClick:()=>{a(e=>(e+1)%t.length)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-white/20 hover:bg-white/30 rounded-full p-2 transition-colors",children:le.jsx(N,{className:"w-5 h-5 text-white"})})]}),t.length>1&&le.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.map((e,t)=>le.jsx("button",{onClick:()=>a(t),className:"w-2 h-2 rounded-full transition-colors "+(t===s?"bg-white":"bg-white/50")},t))})]})},xe=({user:e,cartItems:s,products:a,loading:t,onProductClick:l,onLoginRequired:r,onCartClick:i,onAddToCart:n,onNavigateToFlashSale:c})=>{var x;const[g,b]=m.useState(""),[j,S]=m.useState("all"),[P,C]=m.useState("all"),[D,A]=m.useState("terbaru"),[T,I]=m.useState(1),L=[{id:"all",name:"Semua",icon:"🛍️"},{id:"hijab",name:"Hijab",icon:"🧕"},{id:"gamis",name:"Gamis",icon:"👗"},{id:"khimar",name:"Khimar",icon:"🧕"},{id:"tunik",name:"Tunik",icon:"👚"},{id:"abaya",name:"Abaya",icon:"🥻"}],R=e=>{n(e)},F=a.filter(e=>{const s=e.name.toLowerCase().includes(g.toLowerCase())||e.description.toLowerCase().includes(g.toLowerCase()),a="all"===j||e.category===j,t="all"===P||e.status===P;return s&&a&&t}),M=[...F].sort((s,a)=>{switch(D){case"terbaru":return new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime();case"terlama":return new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime();case"terlaris":return(a.salesCount||0)-(s.salesCount||0);case"termurah":return("reseller"===(null==e?void 0:e.role)?s.resellerPrice:s.retailPrice)-("reseller"===(null==e?void 0:e.role)?a.resellerPrice:a.retailPrice);case"termahal":const t="reseller"===(null==e?void 0:e.role)?s.resellerPrice:s.retailPrice;return("reseller"===(null==e?void 0:e.role)?a.resellerPrice:a.retailPrice)-t;default:return 0}}),O=h.useMemo(()=>{let e=a.filter(e=>e.isFeatured);return 0===e.length&&a.length>0&&(e=a.slice(0,3).map((e,s)=>d(o({},e),{isFeatured:!0,featuredOrder:s+1}))),e.sort((e,s)=>e.featuredOrder&&s.featuredOrder?e.featuredOrder-s.featuredOrder:(s.salesCount||0)-(e.salesCount||0))},[a]),B=h.useMemo(()=>{const e=new Set(O.map(e=>e.id));return M.filter(s=>!e.has(s.id))},[M,O]),z=8*T,E=z-8,K=B.slice(E,z),$=Math.ceil(B.length/8);return m.useEffect(()=>{I(1)},[g,j,P,D]),t?le.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:le.jsxs("div",{className:"text-center",children:[le.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),le.jsx("p",{className:"text-gray-600",children:"Loading products..."})]})}):le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[le.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-4",children:[le.jsxs("div",{className:"flex items-center justify-between mb-4",children:[le.jsxs("div",{children:[le.jsx("h1",{className:"text-xl font-bold",children:"Azzahra Fashion"}),le.jsx("p",{className:"text-pink-100 text-sm",children:"Muslim Fashion Store"})]}),le.jsx("div",{className:"flex items-center space-x-3",children:e?le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsx(y,{className:"w-5 h-5"}),le.jsx("span",{className:"text-sm",children:e.name})]}):le.jsx("button",{onClick:r,className:"bg-white/20 px-3 py-1 rounded-full text-sm hover:bg-white/30 transition-colors",children:"Login"})})]}),le.jsxs("div",{className:"flex items-center space-x-3",children:[le.jsxs("div",{className:"flex-1 relative",children:[le.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),le.jsx("input",{type:"text",placeholder:"Cari produk...",value:g,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg text-gray-800 focus:outline-none focus:ring-2 focus:ring-white/50"})]}),le.jsxs("button",{onClick:i,className:"relative p-2 bg-white rounded-full shadow-md hover:shadow-lg transition-shadow",children:[le.jsx(p,{className:"w-6 h-6 text-gray-600"}),s.length>0&&le.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:s.length})]})]})]}),le.jsx("div",{className:"p-4",children:le.jsx(me,{onBannerClick:e=>{console.log("Banner clicked:",e),"flashsale"===e.type&&(console.log("Flash sale banner clicked, navigating..."),c&&c())}})}),le.jsxs("div",{className:"px-4 mb-6",children:[le.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[le.jsx(u,{className:"w-5 h-5 text-yellow-500 fill-current"}),le.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"Produk Unggulan"})]}),t?le.jsx("div",{className:"grid grid-cols-2 gap-4",children:[...Array(2)].map((e,s)=>le.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[le.jsx("div",{className:"w-full h-48 bg-gray-200 animate-pulse"}),le.jsxs("div",{className:"p-4",children:[le.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 animate-pulse"}),le.jsx("div",{className:"h-3 bg-gray-200 rounded mb-3 animate-pulse"}),le.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 animate-pulse"})]})]},`skeleton-${s}`))}):O.length>0?le.jsx("div",{className:"grid grid-cols-2 gap-4",children:O.map(s=>le.jsx(ce,{product:s,onProductClick:l,onAddToCart:R,user:e,isFeatured:!0},`featured-${s.id}`))}):le.jsxs("div",{className:"text-center py-8 text-gray-500 bg-white rounded-lg",children:[le.jsx(u,{className:"w-12 h-12 mx-auto mb-2 text-gray-300"}),le.jsx("p",{children:"Belum ada produk unggulan"})]})]}),le.jsx("div",{className:"px-4",children:le.jsxs("div",{className:"flex flex-col space-y-3",children:[le.jsx("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:L.map(e=>le.jsxs("button",{onClick:()=>S(e.id),className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 rounded-full transition-colors "+(j===e.id?"bg-pink-500 text-white":"bg-white text-gray-600 hover:bg-gray-100"),children:[le.jsx("span",{children:e.icon}),le.jsx("span",{className:"text-sm font-medium",children:e.name})]},e.id))}),le.jsxs("div",{className:"flex space-x-3 overflow-x-auto pb-2",children:[le.jsx("button",{onClick:()=>C("all"),className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 rounded-full transition-colors "+("all"===P?"bg-gray-700 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:le.jsx("span",{className:"text-sm font-medium",children:"Semua Status"})}),le.jsxs("button",{onClick:()=>C("ready"),className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 rounded-full transition-colors "+("ready"===P?"bg-green-500 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-green-300"),children:[le.jsx("span",{className:"w-2 h-2 bg-current rounded-full"}),le.jsx("span",{className:"text-sm font-medium",children:"Ready"})]}),le.jsxs("button",{onClick:()=>C("po"),className:"flex-shrink-0 flex items-center space-x-2 px-4 py-2 rounded-full transition-colors "+("po"===P?"bg-orange-500 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-orange-300"),children:[le.jsx("span",{className:"w-2 h-2 bg-current rounded-full"}),le.jsx("span",{className:"text-sm font-medium",children:"PO"})]})]})]})}),le.jsxs("div",{className:"px-4",children:[le.jsxs("div",{className:"flex flex-col space-y-3 mb-4",children:[le.jsxs("div",{className:"flex items-center justify-between",children:[le.jsx("h2",{className:"text-lg font-bold text-gray-800",children:"all"===j?"Semua Produk":null==(x=L.find(e=>e.id===j))?void 0:x.name}),le.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[le.jsx(w,{className:"w-4 h-4 mr-1"}),F.length," produk"]})]}),le.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:[le.jsxs("div",{className:"flex items-center text-sm text-gray-600 mr-2",children:[le.jsx(k,{className:"w-4 h-4 mr-1"}),"Urutkan:"]}),le.jsx("button",{onClick:()=>A("terbaru"),className:"flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+("terbaru"===D?"bg-pink-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Terbaru"}),le.jsx("button",{onClick:()=>A("terlaris"),className:"flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+("terlaris"===D?"bg-pink-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Terlaris"}),le.jsx("button",{onClick:()=>A("termurah"),className:"flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+("termurah"===D?"bg-pink-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Termurah"}),le.jsx("button",{onClick:()=>A("termahal"),className:"flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+("termahal"===D?"bg-pink-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Termahal"}),le.jsx("button",{onClick:()=>A("terlama"),className:"flex-shrink-0 px-3 py-1.5 rounded-full text-sm font-medium transition-colors "+("terlama"===D?"bg-pink-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:"Terlama"})]})]}),0===F.length?le.jsxs("div",{className:"text-center py-12",children:[le.jsx("div",{className:"text-gray-400 mb-4",children:le.jsx(v,{className:"w-12 h-12 mx-auto"})}),le.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Produk tidak ditemukan"}),le.jsx("p",{className:"text-gray-500",children:"Coba kata kunci lain atau pilih kategori berbeda"})]}):le.jsxs(le.Fragment,{children:[le.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:K.map(s=>le.jsx(ce,{product:s,onProductClick:l,onAddToCart:R,user:e},s.id))}),$>1&&le.jsxs("div",{className:"flex flex-col items-center mt-8 space-y-4",children:[le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsxs("button",{onClick:()=>I(e=>Math.max(1,e-1)),disabled:1===T,className:"flex items-center space-x-1 px-3 py-2 rounded-lg transition-colors "+(1===T?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:[le.jsx(f,{className:"w-4 h-4"}),le.jsx("span",{children:"Sebelumnya"})]}),le.jsx("div",{className:"flex items-center space-x-1",children:[...Array($)].map((e,s)=>{const a=s+1,t=T===a;return 1===a||a===$||a>=T-1&&a<=T+1?le.jsx("button",{onClick:()=>I(a),className:"w-10 h-10 rounded-lg font-medium transition-colors "+(t?"bg-pink-500 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:a},a):2===a&&T>3||a===$-1&&T<$-2?le.jsx("span",{className:"px-2 text-gray-400",children:"..."},a):null})}),le.jsxs("button",{onClick:()=>I(e=>Math.min($,e+1)),disabled:T===$,className:"flex items-center space-x-1 px-3 py-2 rounded-lg transition-colors "+(T===$?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"),children:[le.jsx("span",{children:"Selanjutnya"}),le.jsx(N,{className:"w-4 h-4"})]})]}),le.jsxs("div",{className:"text-sm text-gray-600",children:["Menampilkan ",E+1,"-",Math.min(z,B.length)," dari ",B.length," produk"]})]})]})]}),e&&le.jsx("div",{className:"fixed bottom-24 right-4 bg-white rounded-lg shadow-lg p-3 border-l-4 border-pink-500",children:le.jsx("div",{className:"text-xs text-gray-600",children:"reseller"===e.role?le.jsxs("div",{className:"flex items-center space-x-1",children:[le.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),le.jsx("span",{children:"Harga Reseller Aktif"})]}):le.jsxs("div",{className:"flex items-center space-x-1",children:[le.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),le.jsx("span",{children:"Harga Retail"})]})})})]})},he=({product:e,user:s,onBack:a,onLoginRequired:t,onAddToCart:l,onBuyNow:r,onNavigateToCart:i})=>{const[n,o]=m.useState(""),[d,c]=m.useState(""),[x,h]=m.useState(1),[g,b]=m.useState(0);return le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24",children:[le.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:le.jsxs("div",{className:"flex items-center justify-between p-4",children:[le.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full",children:le.jsx(S,{className:"w-6 h-6 text-gray-600"})}),le.jsx("h1",{className:"text-lg font-semibold",children:"Detail Produk"}),le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsx("button",{onClick:i||(()=>{}),className:"p-2 rounded-full transition-colors relative "+(s?"bg-pink-500 text-white hover:bg-pink-600":"bg-gray-100 text-gray-400"),children:le.jsx(p,{className:"w-5 h-5"})}),le.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:le.jsx(P,{className:"w-5 h-5 text-gray-600"})}),le.jsx("button",{className:"p-2 hover:bg-gray-100 rounded-full",children:le.jsx(C,{className:"w-5 h-5 text-gray-600"})})]})]})}),le.jsxs("div",{className:"bg-white",children:[le.jsxs("div",{className:"relative",children:[le.jsx("img",{src:e.images[g],alt:e.name,className:"w-full h-96 object-cover"}),e.isFlashSale&&le.jsx("div",{className:"absolute top-4 left-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"FLASH SALE"}),"po"===e.status&&le.jsx("div",{className:"absolute top-4 right-4 bg-orange-500 text-white px-3 py-1 rounded-full text-sm font-semibold",children:"PRE ORDER"})]}),e.images.length>1&&le.jsx("div",{className:"flex space-x-2 p-4 overflow-x-auto",children:e.images.map((s,a)=>le.jsx("button",{onClick:()=>b(a),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 "+(g===a?"border-pink-500":"border-gray-200"),children:le.jsx("img",{src:s,alt:`${e.name} ${a+1}`,className:"w-full h-full object-cover"})},a))})]}),le.jsxs("div",{className:"bg-white mt-2 p-4",children:[le.jsx("div",{className:"flex items-start justify-between mb-3",children:le.jsxs("div",{className:"flex-1",children:[le.jsx("h1",{className:"text-xl font-bold text-gray-800 mb-2",children:e.name}),le.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[le.jsxs("div",{className:"flex items-center",children:[[...Array(5)].map((e,s)=>le.jsx(u,{className:"w-4 h-4 text-yellow-400 fill-current"},s)),le.jsx("span",{className:"text-sm text-gray-600 ml-1",children:"(4.8)"})]}),le.jsx("span",{className:"text-sm text-gray-500",children:"• Terjual 150+"})]})]})}),le.jsx("div",{className:"mb-4",children:e.isFlashSale&&e.flashSalePrice>0?le.jsxs("div",{className:"space-y-1",children:[le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsxs("span",{className:"text-2xl font-bold text-red-600",children:["Rp ",e.flashSalePrice.toLocaleString("id-ID")]}),le.jsxs("span",{className:"bg-red-100 text-red-600 text-xs px-2 py-1 rounded",children:["-",Math.round(100*(1-e.flashSalePrice/(e.originalRetailPrice||e.retailPrice))),"%"]})]}),le.jsxs("div",{className:"text-lg text-gray-500 line-through",children:["Rp ",(e.originalRetailPrice||e.retailPrice).toLocaleString("id-ID")]})]}):le.jsxs("div",{className:"space-y-1",children:[le.jsxs("div",{className:"text-2xl font-bold text-pink-600",children:["Rp ",(e.isFlashSale&&e.flashSalePrice>0?e.flashSalePrice:"reseller"===(null==s?void 0:s.role)?e.resellerPrice:e.retailPrice).toLocaleString("id-ID")]}),"reseller"===(null==s?void 0:s.role)?le.jsxs("div",{className:"text-sm text-blue-600 font-medium",children:["Harga Reseller (Retail: Rp ",e.retailPrice.toLocaleString("id-ID"),")"]}):le.jsx("button",{onClick:()=>{if("reseller"!==(null==s?void 0:s.role)){const s=encodeURIComponent(`Halo Admin, saya tertarik dengan produk ${e.name} dan ingin menanyakan tentang harga reseller. Mohon info lebih lanjut. Terima kasih.`);window.open(`https://wa.me/6287815990944?text=${s}`,"_blank")}},className:"text-sm text-green-600 font-medium hover:text-green-700 underline transition-colors",children:"💬 Info Harga Reseller?"})]})}),le.jsx("div",{className:"flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg",children:le.jsxs("div",{className:"flex items-center space-x-4",children:[le.jsxs("div",{className:"text-sm",children:[le.jsx("span",{className:"text-gray-600",children:"Stok: "}),le.jsx("span",{className:"font-semibold "+(e.stock>10?"text-green-600":e.stock>0?"text-yellow-600":"text-red-600"),children:e.stock})]}),le.jsxs("div",{className:"text-sm",children:[le.jsx("span",{className:"text-gray-600",children:"Status: "}),le.jsx("span",{className:"font-semibold "+("ready"===e.status?"text-green-600":"text-orange-600"),children:"ready"===e.status?"Ready Stock":"Pre Order"})]})]})}),le.jsx("div",{className:"border-t pt-4",children:le.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description})})]}),le.jsxs("div",{className:"bg-white mt-2 p-4",children:[le.jsxs("div",{className:"mb-6",children:[le.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Pilih Ukuran"}),le.jsx("div",{className:"flex flex-wrap gap-2",children:e.variants.sizes.map(e=>le.jsx("button",{onClick:()=>o(e),className:"px-4 py-2 border rounded-lg font-medium transition-colors "+(n===e?"border-pink-500 bg-pink-50 text-pink-600":"border-gray-300 text-gray-600 hover:border-gray-400"),children:e},e))})]}),le.jsxs("div",{className:"mb-6",children:[le.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Pilih Warna"}),le.jsx("div",{className:"flex flex-wrap gap-2",children:e.variants.colors.map(e=>le.jsx("button",{onClick:()=>c(e),className:"px-4 py-2 border rounded-lg font-medium transition-colors "+(d===e?"border-pink-500 bg-pink-50 text-pink-600":"border-gray-300 text-gray-600 hover:border-gray-400"),children:e},e))})]}),le.jsxs("div",{className:"mb-6",children:[le.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Jumlah"}),le.jsxs("div",{className:"flex items-center space-x-4",children:[le.jsxs("div",{className:"flex items-center space-x-3 bg-gray-100 rounded-lg p-1",children:[le.jsx("button",{onClick:()=>h(Math.max(1,x-1)),className:"w-10 h-10 flex items-center justify-center rounded-md hover:bg-gray-200 transition-colors",children:le.jsx(D,{className:"w-4 h-4"})}),le.jsx("span",{className:"w-12 text-center font-semibold",children:x}),le.jsx("button",{onClick:()=>h(x+1),className:"w-10 h-10 flex items-center justify-center rounded-md hover:bg-gray-200 transition-colors",children:le.jsx(A,{className:"w-4 h-4"})})]}),le.jsxs("div",{className:"text-sm text-gray-600",children:["Stok tersedia: ",le.jsx("span",{className:"font-semibold",children:e.stock})]})]})]})]}),le.jsxs("div",{className:"bg-white mt-2 p-4",children:[le.jsx("h3",{className:"font-semibold text-gray-800 mb-3",children:"Detail Produk"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Kategori:"}),le.jsx("span",{className:"font-medium capitalize",children:e.category})]}),"po"===e.status&&e.estimatedReady&&le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Estimasi Ready:"}),le.jsx("span",{className:"font-medium",children:e.estimatedReady.toLocaleDateString("id-ID")})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Berat:"}),le.jsx("span",{className:"font-medium",children:"500 gram"})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Kondisi:"}),le.jsx("span",{className:"font-medium text-green-600",children:"Baru"})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Garansi:"}),le.jsx("span",{className:"font-medium",children:"Garansi Toko"})]})]})]}),le.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg z-50",children:[le.jsxs("div",{className:"flex space-x-3",children:[le.jsxs("button",{onClick:()=>{s?n&&d?(l(e,{size:n,color:d},x),o(""),c(""),h(1)):alert("Pilih ukuran dan warna terlebih dahulu"):t()},disabled:!n||!d,className:"flex-1 bg-pink-100 text-pink-600 py-4 rounded-lg font-semibold hover:bg-pink-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:[le.jsx(p,{className:"w-5 h-5"}),le.jsx("span",{children:"Tambah ke Keranjang"})]}),le.jsx("button",{onClick:()=>{s?n&&d?r(e,{size:n,color:d},x):alert("Pilih ukuran dan warna terlebih dahulu"):t()},disabled:!n||!d,className:"flex-1 bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Beli Sekarang"})]}),(!n||!d)&&le.jsx("p",{className:"text-center text-sm text-gray-500 mt-2",children:"Pilih ukuran dan warna terlebih dahulu"})]})]})},ue=({cartItems:e,user:s,updateQuantity:a,removeFromCart:t,getTotalPrice:l,onBack:r,onCheckout:i})=>{if(0===e.length)return le.jsxs("div",{className:"min-h-screen bg-gray-50",children:[le.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:le.jsxs("div",{className:"flex items-center p-4",children:[le.jsx("button",{onClick:r,className:"mr-4",children:le.jsx(S,{className:"w-6 h-6 text-gray-600"})}),le.jsx("h1",{className:"text-lg font-semibold",children:"Keranjang Belanja"})]})}),le.jsxs("div",{className:"flex flex-col items-center justify-center h-96",children:[le.jsx(T,{className:"w-16 h-16 text-gray-300 mb-4"}),le.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Keranjang Kosong"}),le.jsxs("p",{className:"text-gray-500 text-center mb-6",children:["Belum ada produk di keranjang Anda.",le.jsx("br",{}),"Yuk mulai belanja!"]}),le.jsx("button",{onClick:r,className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all",children:"Mulai Belanja"})]})]});const n=l();return le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-32",children:[le.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:le.jsxs("div",{className:"flex items-center p-4",children:[le.jsx("button",{onClick:r,className:"mr-4",children:le.jsx(S,{className:"w-6 h-6 text-gray-600"})}),le.jsx("h1",{className:"text-lg font-semibold",children:"Keranjang Belanja"}),le.jsx("span",{className:"ml-2 bg-pink-100 text-pink-600 text-xs px-2 py-1 rounded-full",children:e.length})]})}),le.jsx("div",{className:"p-4 space-y-4",children:e.map(e=>{var l,r;const i="reseller"===(null==s?void 0:s.role)?e.resellerPrice:e.retailPrice,n=i*e.quantity;return le.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:le.jsxs("div",{className:"flex space-x-4",children:[le.jsx("img",{src:e.images[0],alt:e.name,className:"w-20 h-20 object-cover rounded-lg"}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold text-gray-800 mb-1",children:e.name}),e.selectedVariant&&le.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["Ukuran: ",e.selectedVariant.size," | Warna: ",e.selectedVariant.color]}),le.jsxs("div",{className:"flex items-center justify-between",children:[le.jsxs("div",{className:"flex flex-col",children:[le.jsxs("span",{className:"text-lg font-bold text-pink-600",children:["Rp ",i.toLocaleString("id-ID")]}),"reseller"===(null==s?void 0:s.role)&&le.jsx("span",{className:"text-xs text-blue-600 font-medium",children:"Harga Reseller"})]}),le.jsxs("div",{className:"flex items-center space-x-3",children:[le.jsxs("div",{className:"flex items-center space-x-2 bg-gray-100 rounded-lg p-1",children:[le.jsx("button",{onClick:()=>a(e.id,e.selectedVariant,Math.max(1,e.quantity-1)),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-gray-200 transition-colors",children:le.jsx(D,{className:"w-4 h-4"})}),le.jsx("span",{className:"w-8 text-center font-semibold",children:e.quantity}),le.jsx("button",{onClick:()=>a(e.id,e.selectedVariant,e.quantity+1),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-gray-200 transition-colors",children:le.jsx(A,{className:"w-4 h-4"})})]}),le.jsx("button",{onClick:()=>t(e.id,e.selectedVariant),className:"w-8 h-8 flex items-center justify-center text-red-500 hover:bg-red-50 rounded-md transition-colors",children:le.jsx(I,{className:"w-4 h-4"})})]})]}),le.jsxs("div",{className:"mt-2 text-right",children:[le.jsx("span",{className:"text-sm text-gray-600",children:"Subtotal: "}),le.jsxs("span",{className:"font-semibold text-gray-800",children:["Rp ",n.toLocaleString("id-ID")]})]})]})]})},`${e.id}-${null==(l=e.selectedVariant)?void 0:l.size}-${null==(r=e.selectedVariant)?void 0:r.color}`)})}),le.jsxs("div",{className:"fixed bottom-20 left-0 right-0 bg-white border-t border-gray-200 p-4 shadow-lg",children:[le.jsxs("div",{className:"flex items-center justify-between mb-3",children:[le.jsxs("span",{className:"text-gray-600",children:["Total (",e.length," item)"]}),le.jsxs("span",{className:"text-xl font-bold text-pink-600",children:["Rp ",n.toLocaleString("id-ID")]})]}),le.jsx("button",{onClick:i,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all",children:"Checkout Sekarang"})]})]})},pe="azzahra-addresses",ge=({initialData:e,onSave:s,onCancel:a})=>{const[t,l]=m.useState({name:(null==e?void 0:e.name)||"",phone:(null==e?void 0:e.phone)||"",fullAddress:(null==e?void 0:e.fullAddress)||"",province:(null==e?void 0:e.province)||"",city:(null==e?void 0:e.city)||"",postalCode:(null==e?void 0:e.postalCode)||"",isDefault:(null==e?void 0:e.isDefault)||!1}),[r,i]=m.useState({}),n=e=>{const{name:s,value:a,type:t}=e.target;l(l=>d(o({},l),{[s]:"checkbox"===t?e.target.checked:a})),r[s]&&i(e=>d(o({},e),{[s]:void 0}))};return le.jsxs("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return t.name.trim()||(e.name="Nama harus diisi"),t.phone.trim()||(e.phone="Nomor telepon harus diisi"),t.fullAddress.trim()||(e.fullAddress="Alamat harus diisi"),t.province.trim()||(e.province="Provinsi harus diisi"),t.city.trim()||(e.city="Kota harus diisi"),t.postalCode.trim()||(e.postalCode="Kode pos harus diisi"),i(e),0===Object.keys(e).length})()&&s(t)},className:"space-y-4",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap *"}),le.jsx("input",{type:"text",name:"name",value:t.name,onChange:n,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent "+(r.name?"border-red-500":"border-gray-300"),placeholder:"Masukkan nama lengkap"}),r.name&&le.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.name})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nomor Telepon *"}),le.jsx("input",{type:"tel",name:"phone",value:t.phone,onChange:n,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent "+(r.phone?"border-red-500":"border-gray-300"),placeholder:"Masukkan nomor telepon aktif"}),r.phone&&le.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.phone})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provinsi *"}),le.jsxs("select",{name:"province",value:t.province,onChange:n,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent "+(r.province?"border-red-500":"border-gray-300"),children:[le.jsx("option",{value:"",children:"Pilih provinsi"}),["Aceh","Sumatera Utara","Sumatera Barat","Sumatera Selatan","Riau","Kepulauan Riau","Jambi","Bengkulu","Lampung","Banten","DKI Jakarta","Jawa Barat","Jawa Tengah","DI Yogyakarta","Jawa Timur","Bali","Nusa Tenggara Barat","Nusa Tenggara Timur","Kalimantan Barat","Kalimantan Tengah","Kalimantan Selatan","Kalimantan Timur","Kalimantan Utara","Sulawesi Utara","Sulawesi Tengah","Sulawesi Selatan","Sulawesi Tenggara","Sulawesi Barat","Gorontalo","Sulawesi Selatan","Maluku","Maluku Utara","Papua","Papua Barat","Papua Selatan","Papua Tengah"].map(e=>le.jsx("option",{value:e,children:e},e))]}),r.province&&le.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.province})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kota/Kabupaten *"}),le.jsx("input",{type:"text",name:"city",value:t.city,onChange:n,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent "+(r.city?"border-red-500":"border-gray-300"),placeholder:"Masukkan kota/kabupaten"}),r.city&&le.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.city})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kode Pos *"}),le.jsx("input",{type:"text",name:"postalCode",value:t.postalCode,onChange:n,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent "+(r.postalCode?"border-red-500":"border-gray-300"),placeholder:"Masukkan kode pos",maxLength:5}),r.postalCode&&le.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.postalCode})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat Lengkap *"}),le.jsx("textarea",{name:"fullAddress",value:t.fullAddress,onChange:n,rows:3,className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent "+(r.fullAddress?"border-red-500":"border-gray-300"),placeholder:"Jalan, nomor rumah, RT/RW, kelurahan/desa"}),r.fullAddress&&le.jsx("p",{className:"text-red-500 text-xs mt-1",children:r.fullAddress})]}),le.jsxs("div",{className:"flex items-center",children:[le.jsx("input",{type:"checkbox",name:"isDefault",checked:t.isDefault,onChange:n,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}),le.jsx("label",{className:"ml-2 text-sm text-gray-700",children:"Jadikan alamat utama"})]}),le.jsxs("div",{className:"flex space-x-3 pt-4",children:[le.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Batal"}),le.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors font-medium",children:e?"Update":"Simpan"})]})]})},be=({cartItems:e,user:s,getTotalPrice:a,clearCart:t,onBack:l})=>{var r,i;const[n,c]=m.useState(1),[x,h]=m.useState(!1),[u,p]=m.useState(""),[g,b]=m.useState(null),{addresses:j,addAddress:f,updateAddress:N,deleteAddress:v,setDefaultAddress:w,getDefaultAddress:k}=(()=>{const[e,s]=m.useState([]),[a,t]=m.useState(!0);m.useEffect(()=>{l()},[]);const l=()=>{try{const e=localStorage.getItem(pe);e&&s(JSON.parse(e))}catch(e){console.error("Failed to load addresses:",e)}finally{t(!1)}},r=e=>{localStorage.setItem(pe,JSON.stringify(e)),s(e)};return{addresses:e,loading:a,addAddress:s=>{const a=d(o({},s),{id:Date.now().toString()});if(0===e.length||s.isDefault){const s=e.map(e=>d(o({},e),{isDefault:!1}));r([...s,a])}else r([...e,a])},updateAddress:(s,a)=>{const t=e.map(e=>e.id===s?o(o({},e),a):a.isDefault?d(o({},e),{isDefault:!1}):e),l=t.find(e=>e.id===s&&a.isDefault);r(l?t.map(e=>e.id===s?e:d(o({},e),{isDefault:!1})):t)},deleteAddress:s=>{const a=e.find(e=>e.id===s);if(e.length<=1)alert("Tidak dapat menghapus alamat. Minimal harus ada satu alamat.");else if(null==a?void 0:a.isDefault){const a=e.filter(e=>e.id!==s);a.length>0&&(a[0].isDefault=!0),r(a)}else r(e.filter(e=>e.id!==s))},setDefaultAddress:s=>{r(e.map(e=>d(o({},e),{isDefault:e.id===s})))},getDefaultAddress:()=>e.find(e=>e.isDefault)||e[0],refresh:l}})(),[P,C]=m.useState({name:(null==s?void 0:s.name)||"",phone:"",address:"",isDropship:!1,dropshipName:"",dropshipPhone:"",paymentMethod:"transfer",shippingCourier:"jnt",shippingCost:0,notes:""}),[D,T]=m.useState(null),[E,K]=m.useState(""),$=[{id:"ojek",name:"OJEK",price:0},{id:"jnt",name:"J&T",price:0},{id:"jne",name:"JNE",price:0},{id:"pos",name:"POS Indonesia",price:0},{id:"tiki",name:"TIKI",price:0},{id:"lion",name:"Lion Parcel",price:0},{id:"idexpress",name:"ID Express",price:0}],U=e=>{const{name:s,value:a,type:t}=e.target;C(l=>d(o({},l),{[s]:"checkbox"===t?e.target.checked:"number"===t?parseInt(a)||0:a}))},V=e=>{e.target.files&&e.target.files[0]&&T(e.target.files[0])};m.useEffect(()=>{const e=k();e&&(p(e.id),C(s=>d(o({},s),{name:e.name,phone:e.phone,address:e.fullAddress})))},[j]);const H=e=>{p(e);const s=j.find(s=>s.id===e);s&&C(e=>d(o({},e),{name:P.isDropship?e.name:s.name,phone:P.isDropship?e.phone:s.phone,address:P.isDropship?e.address:s.fullAddress}))},q=()=>{"transfer"!==P.paymentMethod||D?c(3):alert("Mohon upload bukti pembayaran")},_=a(),J=P.shippingCost||0,G=_+J;return 3===n?le.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:le.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[le.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:le.jsx(L,{className:"w-8 h-8 text-green-600"})}),le.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Pesanan Berhasil!"}),le.jsxs("p",{className:"text-gray-600 mb-4",children:["Pesanan Anda dengan ID ",le.jsx("span",{className:"font-semibold text-pink-600",children:E})," telah berhasil dibuat."]}),le.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[le.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Status: ",le.jsx("span",{className:"text-orange-600 font-semibold",children:"Menunggu Pembayaran"})]}),le.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",le.jsxs("span",{className:"font-semibold",children:["Rp ",G.toLocaleString("id-ID")]})]})]}),le.jsx("button",{onClick:l,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all",children:"Kembali ke Beranda"})]})}):2===n?le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[le.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:le.jsxs("div",{className:"flex items-center p-4",children:[le.jsx("button",{onClick:()=>c(1),className:"mr-4",children:le.jsx(S,{className:"w-6 h-6 text-gray-600"})}),le.jsx("h1",{className:"text-lg font-semibold",children:"Pembayaran"})]})}),le.jsxs("div",{className:"p-4 space-y-4",children:[le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Ringkasan Pesanan"}),le.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"ID Pesanan:"}),le.jsx("span",{className:"font-semibold text-pink-600",children:E})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Subtotal:"}),le.jsxs("span",{children:["Rp ",_.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsxs("span",{children:["Ongkir (",null==(r=$.find(e=>e.id===P.shippingCourier))?void 0:r.name,")"]}),le.jsxs("span",{children:["Rp ",J.toLocaleString("id-ID")]})]}),le.jsx("div",{className:"border-t pt-1 mt-2",children:le.jsxs("div",{className:"flex justify-between font-semibold",children:[le.jsx("span",{children:"Total:"}),le.jsxs("span",{children:["Rp ",G.toLocaleString("id-ID")]})]})})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Metode Pembayaran"}),"cash"===P.paymentMethod?le.jsxs("div",{className:"text-center py-8",children:[le.jsx(R,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),le.jsx("p",{className:"text-gray-600",children:"Pembayaran Cash on Delivery"}),le.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Bayar saat barang diterima"})]}):le.jsxs("div",{className:"space-y-4",children:[le.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Transfer Bank"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"BRI:"}),le.jsx("span",{className:"font-mono",children:"1234-5678-9012"})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"BCA:"}),le.jsx("span",{className:"font-mono",children:"9876-5432-1098"})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Mandiri:"}),le.jsx("span",{className:"font-mono",children:"1122-3344-5566"})]}),le.jsx("p",{className:"text-blue-700 font-semibold mt-2",children:"a.n. Azzahra Fashion"})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Bukti Pembayaran"}),le.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[le.jsx("input",{type:"file",accept:"image/*",onChange:V,className:"hidden",id:"payment-proof"}),le.jsxs("label",{htmlFor:"payment-proof",className:"cursor-pointer",children:[le.jsx(F,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),le.jsx("p",{className:"text-sm text-gray-600",children:D?D.name:"Klik untuk upload bukti transfer"})]})]})]})]})]}),le.jsx("button",{onClick:q,disabled:"transfer"===P.paymentMethod&&!D,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"cash"===P.paymentMethod?"Konfirmasi Pesanan":"Kirim Bukti Pembayaran"})]})]}):le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[le.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:le.jsxs("div",{className:"flex items-center p-4",children:[le.jsx("button",{onClick:l,className:"mr-4",children:le.jsx(S,{className:"w-6 h-6 text-gray-600"})}),le.jsx("h1",{className:"text-lg font-semibold",children:"Checkout"})]})}),le.jsxs("div",{className:"p-4 space-y-4",children:[le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Produk Pesanan"}),le.jsx("div",{className:"space-y-3",children:e.map(e=>{var a,t;return le.jsxs("div",{className:"flex space-x-3",children:[le.jsx("img",{src:e.images[0],alt:e.name,className:"w-16 h-16 object-cover rounded-lg"}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h4",{className:"font-medium text-sm",children:e.name}),e.selectedVariant&&le.jsxs("p",{className:"text-xs text-gray-500",children:[e.selectedVariant.size," - ",e.selectedVariant.color]}),le.jsxs("div",{className:"flex justify-between items-center mt-1",children:[le.jsxs("span",{className:"text-sm font-semibold text-pink-600",children:["Rp ",("reseller"===(null==s?void 0:s.role)?e.resellerPrice:e.retailPrice).toLocaleString("id-ID")]}),le.jsxs("span",{className:"text-sm text-gray-500",children:["x",e.quantity]})]})]})]},`${e.id}-${null==(a=e.selectedVariant)?void 0:a.size}-${null==(t=e.selectedVariant)?void 0:t.color}`)})})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsxs("div",{className:"flex justify-between items-center mb-3",children:[le.jsx("h3",{className:"font-semibold",children:"Informasi Pengiriman"}),le.jsxs("button",{onClick:()=>h(!0),className:"text-pink-600 hover:text-pink-700 flex items-center text-sm font-medium",children:[le.jsx(A,{className:"w-4 h-4 mr-1"}),"Tambah Alamat"]})]}),j.length>0&&le.jsx("div",{className:"space-y-2 mb-4",children:j.map(e=>le.jsx("label",{className:"block p-3 border rounded-lg cursor-pointer transition-colors "+(u===e.id?"border-pink-500 bg-pink-50":"border-gray-200 hover:border-gray-300"),children:le.jsxs("div",{className:"flex items-start justify-between",children:[le.jsxs("div",{className:"flex-1",children:[le.jsxs("div",{className:"flex items-center mb-1",children:[le.jsx("input",{type:"radio",name:"address",checked:u===e.id,onChange:()=>H(e.id),className:"w-4 h-4 text-pink-600 mr-2"}),le.jsx("span",{className:"font-medium",children:e.name}),e.isDefault&&le.jsx("span",{className:"ml-2 text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full",children:"Utama"})]}),le.jsx("p",{className:"text-sm text-gray-600 ml-6",children:e.phone}),le.jsx("p",{className:"text-sm text-gray-600 ml-6",children:e.fullAddress})]}),le.jsxs("div",{className:"flex space-x-2",children:[le.jsx("button",{onClick:s=>{s.stopPropagation(),b(e),h(!0)},className:"text-blue-600 hover:text-blue-700",children:le.jsx(M,{className:"w-4 h-4"})}),j.length>1&&le.jsx("button",{onClick:s=>{s.stopPropagation(),(e=>{if(window.confirm("Apakah Anda yakin ingin menghapus alamat ini?")&&(v(e),u===e)){const e=k();e&&H(e.id)}})(e.id)},className:"text-red-600 hover:text-red-700",children:le.jsx(I,{className:"w-4 h-4"})})]})]})},e.id))}),P.isDropship&&le.jsxs("div",{className:"border-t pt-4",children:[le.jsx("h4",{className:"font-medium text-sm text-gray-700 mb-3",children:"Informasi Pengirim (Dropship)"}),le.jsxs("div",{className:"space-y-3",children:[le.jsx("input",{type:"text",name:"dropshipName",value:P.dropshipName,onChange:U,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Nama pengirim dropship"}),le.jsx("input",{type:"tel",name:"dropshipPhone",value:P.dropshipPhone,onChange:U,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Nomor telepon pengirim"})]})]})]}),x&&le.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:le.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full max-h-[90vh] overflow-y-auto",children:[le.jsx("h3",{className:"text-lg font-semibold mb-4",children:g?"Edit Alamat":"Tambah Alamat Baru"}),le.jsx(ge,{initialData:g,onSave:e=>{g?N(g.id,e):f(e),h(!1),b(null)},onCancel:()=>{h(!1),b(null)}})]})}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Kurir Pengiriman"}),le.jsxs("div",{className:"space-y-4",children:[le.jsxs("div",{children:[le.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[le.jsx(y,{className:"w-4 h-4 inline mr-1"}),"Nama Penerima"]}),le.jsx("input",{type:"text",name:"name",value:P.name,onChange:U,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Masukkan nama penerima"})]}),le.jsxs("div",{children:[le.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[le.jsx(O,{className:"w-4 h-4 inline mr-1"}),"Nomor Telepon"]}),le.jsx("input",{type:"tel",name:"phone",value:P.phone,onChange:U,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Masukkan nomor telepon"})]}),le.jsxs("div",{children:[le.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[le.jsx(B,{className:"w-4 h-4 inline mr-1"}),"Alamat Lengkap"]}),le.jsx("textarea",{name:"address",value:P.address,onChange:U,rows:3,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Masukkan alamat lengkap"})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pilih Kurir Pengiriman"}),le.jsx("select",{name:"shippingCourier",value:P.shippingCourier,onChange:U,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:$.map(e=>le.jsx("option",{value:e.id,children:e.name},e.id))})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biaya Ongkos Kirim (Rp)"}),le.jsx("input",{type:"number",name:"shippingCost",value:P.shippingCost||"",onChange:U,min:"0",className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Masukkan biaya ongkos kirim"}),le.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"* Masukkan 0 jika gratis ongkir"})]}),le.jsxs("div",{className:"border-t pt-4",children:[le.jsxs("label",{className:"flex items-center space-x-3",children:[le.jsx("input",{type:"checkbox",name:"isDropship",checked:P.isDropship,onChange:U,className:"w-4 h-4 text-pink-600 border-gray-300 rounded focus:ring-pink-500"}),le.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Kirim sebagai dropship"})]}),P.isDropship&&le.jsxs("div",{className:"mt-3 space-y-3 pl-7",children:[le.jsx("input",{type:"text",name:"dropshipName",value:P.dropshipName,onChange:U,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Nama pengirim dropship"}),le.jsx("input",{type:"tel",name:"dropshipPhone",value:P.dropshipPhone,onChange:U,className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",placeholder:"Nomor telepon pengirim"})]})]})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Metode Pembayaran"}),le.jsxs("div",{className:"space-y-3",children:[le.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[le.jsx("input",{type:"radio",name:"paymentMethod",value:"transfer",checked:"transfer"===P.paymentMethod,onChange:U,className:"w-4 h-4 text-pink-600"}),le.jsx(z,{className:"w-5 h-5 text-gray-400"}),le.jsx("span",{children:"Transfer Bank"})]}),le.jsxs("label",{className:"flex items-center space-x-3 p-3 border rounded-lg cursor-pointer hover:bg-gray-50",children:[le.jsx("input",{type:"radio",name:"paymentMethod",value:"cash",checked:"cash"===P.paymentMethod,onChange:U,className:"w-4 h-4 text-pink-600"}),le.jsx(R,{className:"w-5 h-5 text-gray-400"}),le.jsx("span",{children:"Cash on Delivery (COD)"})]})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Ringkasan Pembayaran"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsxs("span",{children:["Subtotal (",e.length," item)"]}),le.jsxs("span",{children:["Rp ",_.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsxs("span",{children:["Ongkos Kirim (",null==(i=$.find(e=>e.id===P.shippingCourier))?void 0:i.name,")"]}),le.jsxs("span",{children:["Rp ",J.toLocaleString("id-ID")]})]}),le.jsx("div",{className:"border-t pt-2 mt-2",children:le.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[le.jsx("span",{children:"Total Pembayaran"}),le.jsxs("span",{className:"text-pink-600",children:["Rp ",G.toLocaleString("id-ID")]})]})})]})]}),le.jsx("button",{onClick:()=>{if(!P.name||!P.phone||!P.address)return void alert("Mohon lengkapi semua data pengiriman");const e={shippingInfo:{name:P.name,phone:P.phone,address:P.address,isDropship:P.isDropship,dropshipName:P.dropshipName,dropshipPhone:P.dropshipPhone,courier:P.shippingCourier},paymentMethod:P.paymentMethod,notes:P.notes},s=t(e);K(s),c(2)},disabled:!P.name||!P.phone||!P.address,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-4 rounded-lg font-semibold hover:from-pink-600 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Buat Pesanan"})]})]})},je=({onSuccess:s,onClose:a})=>{const[t,l]=m.useState("customer"),[r,i]=m.useState(!1),n={customer:{id:"1",name:"Siti Aminah",email:"customer@azzahrafashion.com",role:"customer",points:0},reseller:{id:"2",name:"Fatimah Zahra",email:"reseller@azzahrafashion.com",role:"reseller",points:1250},admin:{id:"3",name:"Admin Azzahra",email:"admin@azzahrafashion.com",role:"admin",points:0},owner:{id:"4",name:"Admin Azzahra",email:"owner@azzahrafashion.com",role:"owner",points:0}};return le.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:le.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md relative",children:[le.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:le.jsx(E,{size:24})}),le.jsxs("div",{className:"text-center mb-6",children:[le.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Login Demo"}),le.jsx("p",{className:"text-sm text-gray-600",children:"Pilih role untuk testing"})]}),le.jsxs("div",{className:"space-y-3 mb-6",children:[le.jsx("button",{onClick:()=>l("customer"),className:"w-full p-4 border-2 rounded-lg text-left transition-all "+("customer"===t?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:le.jsxs("div",{className:"flex items-center space-x-3",children:[le.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center",children:le.jsx(y,{className:"w-5 h-5 text-green-600"})}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold text-gray-800",children:"Customer"}),le.jsx("p",{className:"text-sm text-gray-600",children:"Siti Aminah - Harga Retail"}),le.jsx("p",{className:"text-xs text-gray-500",children:"customer@azzahrafashion.com"})]}),"customer"===t&&le.jsx("div",{className:"w-4 h-4 bg-green-500 rounded-full"})]})}),le.jsx("button",{onClick:()=>l("reseller"),className:"w-full p-4 border-2 rounded-lg text-left transition-all "+("reseller"===t?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"),children:le.jsxs("div",{className:"flex items-center space-x-3",children:[le.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:le.jsx(y,{className:"w-5 h-5 text-blue-600"})}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold text-gray-800",children:"Reseller"}),le.jsx("p",{className:"text-sm text-gray-600",children:"Fatimah Zahra - Harga Reseller"}),le.jsx("p",{className:"text-xs text-gray-500",children:"reseller@azzahrafashion.com"}),le.jsx("p",{className:"text-xs text-blue-600 font-medium",children:"Points: 1,250"})]}),"reseller"===t&&le.jsx("div",{className:"w-4 h-4 bg-blue-500 rounded-full"})]})}),le.jsx("button",{onClick:()=>l("admin"),className:"w-full p-4 border-2 rounded-lg text-left transition-all "+("admin"===t?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:le.jsxs("div",{className:"flex items-center space-x-3",children:[le.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:le.jsx(y,{className:"w-5 h-5 text-purple-600"})}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold text-gray-800",children:"Admin"}),le.jsx("p",{className:"text-sm text-gray-600",children:"Admin Azzahra - Limited Access"}),le.jsx("p",{className:"text-xs text-gray-500",children:"admin@azzahrafashion.com"}),le.jsx("p",{className:"text-xs text-purple-600 font-medium",children:"Order Management"})]}),"admin"===t&&le.jsx("div",{className:"w-4 h-4 bg-purple-500 rounded-full"})]})}),le.jsx("button",{onClick:()=>l("owner"),className:"w-full p-4 border-2 rounded-lg text-left transition-all "+("owner"===t?"border-red-500 bg-red-50":"border-gray-200 hover:border-gray-300"),children:le.jsxs("div",{className:"flex items-center space-x-3",children:[le.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:le.jsx(y,{className:"w-5 h-5 text-red-600"})}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold text-gray-800",children:"Owner"}),le.jsx("p",{className:"text-sm text-gray-600",children:"Owner Azzahra - Full Access"}),le.jsx("p",{className:"text-xs text-gray-500",children:"owner@azzahrafashion.com"}),le.jsx("p",{className:"text-xs text-red-600 font-medium",children:"Full Dashboard Access"})]}),"owner"===t&&le.jsx("div",{className:"w-4 h-4 bg-red-500 rounded-full"})]})})]}),le.jsx("button",{onClick:()=>{return a=t,c(e,null,function*(){i(!0),yield new Promise(e=>setTimeout(e,1e3)),s(n[a]),i(!1)});var a},disabled:r,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-semibold transition-all",children:r?"Memproses...":"Login sebagai "+("customer"===t?"Customer":"reseller"===t?"Reseller":"admin"===t?"Admin":"Owner")}),le.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:le.jsxs("p",{className:"text-xs text-gray-600 text-center",children:[le.jsx("strong",{children:"Demo Mode:"})," Pilih role untuk test fitur berbeda"]})})]})})},fe="azzahra-flashsale",Ne=({user:e,cartItems:s,products:a,loading:t,onProductClick:l,onLoginRequired:r,onCartClick:i,onAddToCart:n})=>{const{timeLeft:c,isFlashSaleActive:x}=(()=>{const[e,s]=m.useState(null),[a,t]=m.useState("");return m.useEffect(()=>{let e=localStorage.getItem(fe);if(e)try{const a=JSON.parse(e);s(a)}catch(a){console.error("Failed to load flash sale config")}else{const e={isActive:!0,startTime:(new Date).toISOString(),endTime:new Date(Date.now()+864e5).toISOString(),products:["prod-1","prod-2","prod-3","prod-4"]};localStorage.setItem(fe,JSON.stringify(e)),s(e)}},[]),m.useEffect(()=>{if(!e||!e.isActive)return;const a=setInterval(()=>{const a=(new Date).getTime(),l=new Date(e.endTime).getTime()-a;if(l>0){const e=Math.floor(l/864e5),s=Math.floor(l%864e5/36e5),a=Math.floor(l%36e5/6e4),r=Math.floor(l%6e4/1e3);t(e>0?`${e}h ${s}j ${a}m ${r}d`:`${s}j ${a}m ${r}d`)}else s(e=>e?d(o({},e),{isActive:!1}):null),localStorage.removeItem(fe)},1e3);return()=>clearInterval(a)},[e]),{flashSaleConfig:e,timeLeft:a,isFlashSaleActive:(null==e?void 0:e.isActive)||!1,startFlashSale:e=>{const a=d(o({},e),{isActive:!0});s(a),localStorage.setItem(fe,JSON.stringify(a))},stopFlashSale:()=>{if(e){const a=d(o({},e),{isActive:!1});s(a),localStorage.removeItem(fe)}},isProductInFlashSale:s=>(null==e?void 0:e.isActive)&&e.products.includes(s)}})(),h=e=>{n(e)},u=m.useMemo(()=>a.filter(e=>{var s,a;return e.isFlashSale||localStorage.getItem("azzahra-flashsale")&&(null==(a=null==(s=JSON.parse(localStorage.getItem("azzahra-flashsale")||"{}"))?void 0:s.products)?void 0:a.includes(e.id))}),[a]);return t?le.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center",children:le.jsx("div",{className:"text-white text-xl",children:"Loading flash sale products..."})}):0===u.length?le.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900",children:le.jsxs("div",{className:"container mx-auto px-4 py-8",children:[le.jsxs("div",{className:"flex items-center justify-between mb-8",children:[le.jsx("h1",{className:"text-xl font-bold text-white",children:"Flash Sale ⚡"}),le.jsxs("button",{onClick:i,className:"relative p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors",children:[le.jsx(p,{className:"w-6 h-6 text-white"}),s.length>0&&le.jsx("span",{className:"absolute -top-2 -right-2 bg-yellow-400 text-gray-800 text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:s.length})]})]}),le.jsx("div",{className:"text-center py-20",children:le.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-12 max-w-2xl mx-auto",children:[le.jsx("div",{className:"text-6xl mb-6",children:"⚡"}),le.jsx("h2",{className:"text-4xl font-bold text-white mb-4",children:"Flash Sale Segera Hadir!"}),le.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Tunggu flash sale kami selanjutnya dengan diskon hingga 70%"}),le.jsx("div",{className:"bg-yellow-400 text-gray-800 px-8 py-4 rounded-full inline-block font-bold text-lg",children:"🔥 Coming Soon 🔥"})]})})]})}):le.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 pb-20",children:le.jsxs("div",{className:"container mx-auto px-4 py-8",children:[le.jsxs("div",{className:"flex items-center justify-between mb-6",children:[le.jsx("h1",{className:"text-xl font-bold text-white",children:"Flash Sale ⚡"}),le.jsxs("button",{onClick:i,className:"relative p-2 bg-white/20 rounded-full hover:bg-white/30 transition-colors",children:[le.jsx(p,{className:"w-6 h-6 text-white"}),s.length>0&&le.jsx("span",{className:"absolute -top-2 -right-2 bg-yellow-400 text-gray-800 text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold",children:s.length})]})]}),le.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl p-8 mb-6 text-center relative overflow-hidden",children:[le.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-yellow-400 rounded-full -mr-16 -mt-16 opacity-20"}),le.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-yellow-400 rounded-full -ml-20 -mb-20 opacity-20"}),le.jsxs("div",{className:"relative z-10",children:[le.jsxs("div",{className:"flex items-center justify-center mb-4",children:[le.jsx(K,{className:"w-12 h-12 text-yellow-300 mr-3"}),le.jsx("h1",{className:"text-4xl font-bold text-white",children:"FLASH SALE"}),le.jsx(K,{className:"w-12 h-12 text-yellow-300 ml-3"})]}),le.jsx("p",{className:"text-xl text-white/90 mb-6",children:"Diskon Hingga 70%"}),c&&le.jsxs("div",{className:"bg-black/30 backdrop-blur-sm rounded-xl p-4 mb-4",children:[le.jsx("p",{className:"text-yellow-300 text-sm mb-2",children:"⏰ Flash Sale Berakhir Dalam"}),le.jsx("div",{className:"text-3xl font-bold text-white tracking-wider",children:c})]}),le.jsxs("div",{className:"flex items-center justify-center space-x-4 text-white/80",children:[le.jsxs("div",{className:"flex items-center",children:[le.jsx($,{className:"w-5 h-5 mr-1"}),le.jsx("span",{className:"text-sm",children:"Terbatas"})]}),le.jsxs("div",{className:"flex items-center",children:[le.jsx(U,{className:"w-5 h-5 mr-1"}),le.jsx("span",{className:"text-sm",children:"Diskon Spesial"})]})]})]})]}),le.jsxs("div",{className:"text-center text-white/60 text-sm mb-6",children:[u.length," produk flash sale tersedia"]}),le.jsx("div",{className:"grid grid-cols-2 gap-4",children:u.map(s=>le.jsx(ce,{product:s,onProductClick:l,onAddToCart:h,isFlashSale:!0,user:e},s.id))})]})})},ye=({user:s})=>{const[a,t]=m.useState("all"),[l,r]=m.useState(null),[i,n]=m.useState(!1),[o,d]=m.useState(null),{orders:x,updateOrderPayment:h}=oe(),u=e=>{r(e),n(!0)},p=()=>{n(!1),r(null),d(null)},g=x.filter(e=>e.userId===(null==s?void 0:s.id)),b="all"===a?g:g.filter(e=>e.status===a),j={pending:{label:"Menunggu Pembayaran",icon:V,color:"text-orange-600 bg-orange-100"},awaiting_verification:{label:"Menunggu Verifikasi",icon:V,color:"text-yellow-600 bg-yellow-100"},paid:{label:"Dibayar",icon:L,color:"text-blue-600 bg-blue-100"},processing:{label:"Dikemas",icon:R,color:"text-blue-600 bg-blue-100"},shipped:{label:"Dikirim",icon:H,color:"text-purple-600 bg-purple-100"},delivered:{label:"Selesai",icon:L,color:"text-green-600 bg-green-100"},cancelled:{label:"Dibatalkan",icon:q,color:"text-red-600 bg-red-100"}};return le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[le.jsxs("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:[le.jsx("div",{className:"p-4",children:le.jsx("h1",{className:"text-lg font-semibold text-center",children:"Pesanan Saya"})}),le.jsx("div",{className:"px-4 pb-4",children:le.jsxs("div",{className:"relative",children:[le.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),le.jsx("input",{type:"text",placeholder:"Cari pesanan...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]})}),le.jsx("div",{className:"flex overflow-x-auto px-4 pb-2",children:[{id:"all",label:"Semua"},{id:"pending",label:"Belum Bayar"},{id:"awaiting_verification",label:"Menunggu Verifikasi"},{id:"processing",label:"Dikemas"},{id:"shipped",label:"Dikirim"},{id:"delivered",label:"Selesai"}].map(e=>le.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 px-4 py-2 mr-2 rounded-full text-sm font-medium transition-colors "+(a===e.id?"bg-pink-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:e.label},e.id))})]}),le.jsx("div",{className:"p-4 space-y-4",children:0===b.length?le.jsxs("div",{className:"text-center py-12",children:[le.jsx(R,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),le.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Belum Ada Pesanan"}),le.jsx("p",{className:"text-gray-500",children:"Pesanan Anda akan muncul di sini"})]}):b.map(e=>{const s=j[e.status],a=s.icon;return le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsxs("div",{className:"flex items-center justify-between mb-3",children:[le.jsxs("div",{children:[le.jsxs("p",{className:"font-semibold text-gray-800",children:["#",e.id]}),le.jsx("p",{className:"text-sm text-gray-500",children:e.createdAt.toLocaleDateString("id-ID")})]}),le.jsxs("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:[le.jsx(a,{className:"w-3 h-3"}),le.jsx("span",{children:s.label})]})]}),le.jsx("div",{className:"space-y-2 mb-3",children:e.items.map((e,s)=>le.jsxs("div",{className:"flex justify-between text-sm",children:[le.jsxs("span",{className:"text-gray-600",children:[e.productName," x",e.quantity]}),le.jsxs("span",{className:"font-medium",children:["Rp ",e.total.toLocaleString("id-ID")]})]},s))}),le.jsxs("div",{className:"border-t pt-3 flex items-center justify-between",children:[le.jsx("span",{className:"text-sm text-gray-600",children:"Total Pesanan"}),le.jsxs("span",{className:"font-bold text-pink-600",children:["Rp ",e.finalTotal.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"mt-3 flex space-x-2",children:[le.jsx("button",{className:"flex-1 bg-gray-100 text-gray-600 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors",children:"Detail"}),"pending"===e.status&&"transfer"===e.paymentMethod&&!e.paymentProof&&le.jsxs("button",{onClick:()=>u(e),className:"flex-1 bg-orange-500 text-white py-2 rounded-lg text-sm font-medium hover:bg-orange-600 transition-colors flex items-center justify-center space-x-1",children:[le.jsx(z,{className:"w-4 h-4"}),le.jsx("span",{children:"Bayar"})]}),("pending"===e.status||"awaiting_verification"===e.status)&&e.paymentProof&&le.jsxs("div",{className:"flex-1 flex space-x-2",children:[le.jsx("div",{className:"flex-1 bg-yellow-100 text-yellow-700 py-2 rounded-lg text-sm font-medium text-center",children:"⏳ Menunggu Verifikasi"}),le.jsxs("button",{onClick:()=>u(e),className:"px-3 py-2 bg-blue-500 text-white rounded-lg text-sm font-medium hover:bg-blue-600 transition-colors flex items-center space-x-1",children:[le.jsx(F,{className:"w-3 h-3"}),le.jsx("span",{children:"Upload Ulang"})]})]}),"paid"===e.status&&le.jsx("div",{className:"flex-1 bg-blue-100 text-blue-700 py-2 rounded-lg text-sm font-medium text-center",children:"✅ Pembayaran Terverifikasi"}),"delivered"===e.status&&le.jsx("button",{className:"flex-1 bg-pink-500 text-white py-2 rounded-lg text-sm font-medium hover:bg-pink-600 transition-colors",children:"Beli Lagi"})]})]},e.id)})}),i&&l&&le.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:le.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md relative max-h-[90vh] overflow-y-auto",children:[le.jsx("button",{onClick:p,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600",children:le.jsx(E,{size:24})}),le.jsxs("div",{className:"text-center mb-6",children:[le.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Pembayaran"}),le.jsxs("p",{className:"text-sm text-gray-600",children:["Pesanan #",l.id]}),le.jsxs("p",{className:"text-lg font-bold text-pink-600 mt-2",children:["Rp ",l.finalTotal.toLocaleString("id-ID")]}),l.paymentProof&&le.jsxs("div",{className:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[le.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"📄 Upload Ulang Bukti Pembayaran"}),le.jsxs("p",{className:"text-yellow-600 text-xs mt-1",children:["Bukti sebelumnya: ",l.paymentProof]})]})]}),le.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:[le.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Transfer ke Rekening:"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"BRI:"}),le.jsx("span",{className:"font-mono",children:"1234-5678-9012"})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"BCA:"}),le.jsx("span",{className:"font-mono",children:"9876-5432-1098"})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Mandiri:"}),le.jsx("span",{className:"font-mono",children:"1122-3344-5566"})]}),le.jsx("p",{className:"text-blue-700 font-semibold mt-2",children:"a.n. Azzahra Fashion"})]})]}),le.jsxs("div",{className:"mb-6",children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Bukti Pembayaran"}),le.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[le.jsx("input",{type:"file",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]&&d(e.target.files[0])},className:"hidden",id:"payment-proof-modal"}),le.jsxs("label",{htmlFor:"payment-proof-modal",className:"cursor-pointer",children:[le.jsx(F,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),le.jsx("p",{className:"text-sm text-gray-600",children:o?o.name:"Klik untuk upload bukti transfer"})]})]})]}),le.jsx("button",{onClick:()=>c(e,null,function*(){if(l&&o)try{yield h(l.id,o.name,"awaiting_verification"),p();const e=l.paymentProof?"Bukti pembayaran berhasil diupload ulang! Menunggu verifikasi admin.":"Bukti pembayaran berhasil dikirim! Menunggu verifikasi admin.";alert(e)}catch(e){console.error("Error submitting payment:",e)}}),disabled:!o,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-pink-600 hover:to-purple-700 disabled:opacity-50 disabled:cursor-not-allowed font-semibold transition-all",children:(null==l?void 0:l.paymentProof)?"Upload Ulang Bukti Pembayaran":"Kirim Bukti Pembayaran"})]})})]})},ve=({user:e,onLogout:s,onNavigateToAdmin:a})=>{if(m.useState("profile"),console.log("AccountPage rendered - User role:",null==e?void 0:e.role),console.log("User:",e),!e)return le.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:le.jsxs("div",{className:"text-center",children:[le.jsx(y,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),le.jsx("p",{className:"text-gray-600",children:"Silakan login terlebih dahulu"})]})});const t=(e=>{switch(e){case"owner":return{text:"Owner",icon:G,color:"text-red-600 bg-red-100"};case"admin":return{text:"Administrator",icon:u,color:"text-purple-600 bg-purple-100"};case"reseller":return{text:"Reseller",icon:y,color:"text-blue-600 bg-blue-100"};default:return{text:"Customer",icon:y,color:"text-green-600 bg-green-100"}}})(e.role),l=t.icon;return le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[le.jsxs("div",{className:"bg-gradient-to-r from-pink-500 to-purple-600 text-white p-6",children:[le.jsxs("div",{className:"flex items-center space-x-4",children:[le.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center",children:le.jsx(y,{className:"w-8 h-8"})}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h2",{className:"text-xl font-bold",children:e.name}),le.jsx("p",{className:"text-pink-100",children:e.email}),le.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium mt-2 ${t.color}`,children:[le.jsx(l,{className:"w-3 h-3"}),le.jsx("span",{className:"text-gray-800",children:t.text})]})]})]}),"reseller"===e.role&&le.jsx("div",{className:"mt-4 bg-white/10 rounded-lg p-3",children:le.jsxs("div",{className:"flex items-center justify-between",children:[le.jsx("span",{className:"text-sm",children:"Total Poin"}),le.jsxs("span",{className:"text-lg font-bold",children:[e.points||0," pts"]})]})})]}),le.jsxs("div",{className:"p-4 space-y-4",children:[le.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[le.jsx("div",{className:"p-4 border-b border-gray-100",children:le.jsx("h3",{className:"font-semibold text-gray-800",children:"Pesanan Saya"})}),le.jsx("div",{className:"p-4",children:le.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[le.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[le.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:le.jsx(R,{className:"w-6 h-6 text-orange-600"})}),le.jsx("span",{className:"text-xs text-gray-600",children:"Belum Bayar"}),le.jsx("span",{className:"text-sm font-semibold",children:"0"})]}),le.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[le.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:le.jsx(R,{className:"w-6 h-6 text-blue-600"})}),le.jsx("span",{className:"text-xs text-gray-600",children:"Dikemas"}),le.jsx("span",{className:"text-sm font-semibold",children:"0"})]}),le.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[le.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:le.jsx(R,{className:"w-6 h-6 text-purple-600"})}),le.jsx("span",{className:"text-xs text-gray-600",children:"Dikirim"}),le.jsx("span",{className:"text-sm font-semibold",children:"0"})]}),le.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[le.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:le.jsx(R,{className:"w-6 h-6 text-green-600"})}),le.jsx("span",{className:"text-xs text-gray-600",children:"Selesai"}),le.jsx("span",{className:"text-sm font-semibold",children:"0"})]})]})})]}),le.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:le.jsxs("div",{className:"divide-y divide-gray-100",children:[le.jsxs("button",{className:"w-full p-4 flex items-center space-x-3 hover:bg-gray-50 transition-colors",children:[le.jsx(C,{className:"w-5 h-5 text-gray-400"}),le.jsx("span",{className:"flex-1 text-left",children:"Wishlist"})]}),le.jsxs("button",{className:"w-full p-4 flex items-center space-x-3 hover:bg-gray-50 transition-colors",children:[le.jsx(B,{className:"w-5 h-5 text-gray-400"}),le.jsx("span",{className:"flex-1 text-left",children:"Alamat Saya"})]}),le.jsxs("button",{className:"w-full p-4 flex items-center space-x-3 hover:bg-gray-50 transition-colors",children:[le.jsx(_,{className:"w-5 h-5 text-gray-400"}),le.jsx("span",{className:"flex-1 text-left",children:"Pengaturan"})]})]})}),("admin"===e.role||"owner"===e.role)&&le.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[le.jsx("div",{className:"p-4 border-b border-gray-100",children:le.jsx("h3",{className:"font-semibold text-gray-800",children:"Admin Panel"})}),le.jsx("div",{className:"p-4",children:le.jsx("button",{onClick:a,className:"w-full text-white py-3 rounded-lg font-semibold transition-all "+("owner"===e.role?"bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600":"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600"),children:"Buka Dashboard Admin"})})]}),le.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:le.jsxs("button",{onClick:()=>{s()},className:"w-full p-4 flex items-center space-x-3 text-red-600 hover:bg-red-50 transition-colors rounded-lg",children:[le.jsx(J,{className:"w-5 h-5"}),le.jsx("span",{children:"Keluar"})]})})]})]})},we=[{id:"featured-1",name:"Gamis Syari Premium Limited Edition",description:"Gamis syari premium dengan bahan berkualitas tinggi dan desain eksklusif.",category:"gamis",images:["https://images.pexels.com/photos/6311475/pexels-photo-6311475.jpeg"],variants:{sizes:["S","M","L","XL"],colors:["Navy","Maroon","Black","Olive"]},retailPrice:399e3,resellerPrice:35e4,costPrice:28e4,stock:20,status:"ready",isFlashSale:!1,flashSalePrice:0,createdAt:new Date,salesCount:25,isFeatured:!0,featuredOrder:1},{id:"featured-2",name:"Hijab Premium Exclusive",description:"Hijab premium dengan bahan import dan finishing premium.",category:"hijab",images:["https://images.pexels.com/photos/6311476/pexels-photo-6311476.jpeg"],variants:{sizes:["Regular"],colors:["Cream","Pink","Mint","Gray"]},retailPrice:159e3,resellerPrice:13e4,costPrice:1e5,stock:30,status:"ready",isFlashSale:!1,flashSalePrice:0,createdAt:new Date,salesCount:40,isFeatured:!0,featuredOrder:2},{id:"1",name:"Hijab Segi Empat Premium",description:"Hijab segi empat berbahan premium dengan kualitas terbaik. Nyaman dipakai sehari-hari.",category:"hijab",images:["https://images.pexels.com/photos/8839887/pexels-photo-8839887.jpeg?auto=compress&cs=tinysrgb&w=400","https://images.pexels.com/photos/8839888/pexels-photo-8839888.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["S","M","L"],colors:["Hitam","Putih","Navy","Coklat"]},retailPrice:85e3,resellerPrice:65e3,costPrice:45e3,stock:25,status:"ready",isFlashSale:!1,flashSalePrice:0,createdAt:new Date,salesCount:15,isFeatured:!0,featuredOrder:1},{id:"2",name:"Gamis Syari Elegant",description:"Gamis syari dengan desain elegant dan modern. Cocok untuk acara formal maupun casual.",category:"gamis",images:["https://images.pexels.com/photos/9594673/pexels-photo-9594673.jpeg?auto=compress&cs=tinysrgb&w=400","https://images.pexels.com/photos/9594674/pexels-photo-9594674.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["S","M","L","XL"],colors:["Hitam","Navy","Maroon","Olive"]},retailPrice:25e4,resellerPrice:2e5,costPrice:15e4,stock:15,status:"ready",isFlashSale:!0,flashSalePrice:199e3,createdAt:new Date,salesCount:28,isFeatured:!0,featuredOrder:2},{id:"3",name:"Khimar Instant Premium",description:"Khimar instant dengan bahan premium, mudah dipakai dan nyaman.",category:"khimar",images:["https://images.pexels.com/photos/8839889/pexels-photo-8839889.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["One Size"],colors:["Hitam","Putih","Abu-abu","Coklat"]},retailPrice:12e4,resellerPrice:95e3,costPrice:7e4,stock:8,status:"po",estimatedReady:new Date(Date.now()+6048e5),isFlashSale:!1,flashSalePrice:0,createdAt:new Date,salesCount:8},{id:"4",name:"Tunik Casual Modern",description:"Tunik dengan desain casual modern, cocok untuk aktivitas sehari-hari.",category:"tunik",images:["https://images.pexels.com/photos/9594675/pexels-photo-9594675.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["S","M","L"],colors:["Putih","Cream","Pink","Lavender"]},retailPrice:18e4,resellerPrice:145e3,costPrice:11e4,stock:20,status:"ready",isFlashSale:!0,flashSalePrice:149e3,createdAt:new Date,salesCount:22,isFeatured:!0,featuredOrder:3},{id:"5",name:"Abaya Dubai Premium",description:"Abaya dengan gaya Dubai yang elegant dan mewah.",category:"abaya",images:["https://images.pexels.com/photos/8839890/pexels-photo-8839890.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["S","M","L","XL"],colors:["Hitam","Navy","Maroon"]},retailPrice:35e4,resellerPrice:28e4,costPrice:22e4,stock:12,status:"ready",isFlashSale:!1,flashSalePrice:0,createdAt:new Date,salesCount:18,isFeatured:!0,featuredOrder:4},{id:"6",name:"Hijab Pashmina Silk",description:"Hijab pashmina berbahan silk yang lembut dan nyaman.",category:"hijab",images:["https://images.pexels.com/photos/8839891/pexels-photo-8839891.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["One Size"],colors:["Dusty Pink","Sage Green","Cream","Lavender"]},retailPrice:95e3,resellerPrice:75e3,costPrice:55e3,stock:30,status:"ready",isFlashSale:!0,flashSalePrice:79e3,createdAt:new Date,salesCount:35},{id:"7",name:"Gamis Katun Jepang",description:"Gamis dengan bahan katun jepang yang adem dan nyaman dipakai sehari-hari.",category:"gamis",images:["https://images.pexels.com/photos/9594676/pexels-photo-9594676.jpeg?auto=compress&cs=tinysrgb&w=400","https://images.pexels.com/photos/9594677/pexels-photo-9594677.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["S","M","L","XL","XXL"],colors:["Biru BCA","Maroon","Mustard","Tosca","Abu-abu"]},retailPrice:275e3,resellerPrice:22e4,costPrice:175e3,stock:18,status:"ready",isFlashSale:!1,flashSalePrice:0,createdAt:new Date},{id:"8",name:"Setelan Kuliah (Gamis + Khimar)",description:"Setelan gamis dan khimar cocok untuk kuliah atau aktivitas formal.",category:"gamis",images:["https://images.pexels.com/photos/9594678/pexels-photo-9594678.jpeg?auto=compress&cs=tinysrgb&w=400"],variants:{sizes:["S","M","L"],colors:["Army","Silver","Milo","Black"]},retailPrice:325e3,resellerPrice:26e4,costPrice:2e5,stock:10,status:"po",estimatedReady:new Date(Date.now()+12096e5),isFlashSale:!0,flashSalePrice:275e3,createdAt:new Date},...[...Array(12)].map((e,s)=>({id:`9-${s}`,name:`Hijab Segi Empat Premium Variasi ${s+1}`,description:`Hijab segi empat berbahan premium dengan kualitas terbaik. Nyaman dipakai sehari-hari. Varian warna ${["Dusty Rose","Milo","Sage","Navy","Maroon","Tosca","Mustard","Terracotta","Cream","Black","White","Gray"][s]}.`,category:"hijab",images:[`https://images.pexels.com/photos/${8839887+s}/pexels-photo-${8839887+s}.jpeg?auto=compress&cs=tinysrgb&w=400`,`https://images.pexels.com/photos/${8839888+s}/pexels-photo-${8839888+s}.jpeg?auto=compress&cs=tinysrgb&w=400`],variants:{sizes:["S","M","L"],colors:["Hitam","Putih","Navy","Coklat","Maroon","Cream","Gray","Pink","Purple","Green"]},retailPrice:75e3+5e3*s,resellerPrice:55e3+4e3*s,costPrice:35e3+3e3*s,stock:15+2*s,status:s%2==0?"ready":"po",isFlashSale:s%3==0,flashSalePrice:.8*(75e3+5e3*s),createdAt:new Date})),...[...Array(10)].map((e,s)=>({id:`10-${s}`,name:`Gamis Casual Modern Series ${s+1}`,description:`Gamis casual dengan desain modern dan modis. Cocok untuk aktivitas sehari-hari. Material ${["Katun","Woolpeach","Moscrepe","Baloteli","Denim","Linen","Satin","Brokat","Tille","Chiffon"][s]}.`,category:"gamis",images:[`https://images.pexels.com/photos/${9594673+s}/pexels-photo-${9594673+s}.jpeg?auto=compress&cs=tinysrgb&w=400`,`https://images.pexels.com/photos/${9594674+s}/pexels-photo-${9594674+s}.jpeg?auto=compress&cs=tinysrgb&w=400`],variants:{sizes:["S","M","L","XL","XXL"],colors:["Black","Navy","Maroon","Army","Silver","Milo","Tosca","Purple","Pink","Brown"]},retailPrice:18e4+1e4*s,resellerPrice:14e4+8e3*s,costPrice:1e5+7e3*s,stock:20+3*s,status:"ready",isFlashSale:s%2==0,flashSalePrice:.85*(18e4+1e4*s),createdAt:new Date}))],ke=()=>{const[s,a]=m.useState(we),[t,l]=m.useState(!0),[r,i]=m.useState([]),n=(e,t=!1)=>{console.log("Applying flash sale:",e),console.log("Products before flash sale:",s.map(e=>({id:e.id,name:e.name,retailPrice:e.retailPrice,isFlashSale:e.isFlashSale}))),a(s=>s.map(s=>{if(e.productIds.includes(s.id)){const a=s.originalRetailPrice||s.retailPrice,t=s.originalResellerPrice||s.resellerPrice;let l=a;l="percentage"===e.discountType?Math.round(a*(1-e.discountValue/100)):Math.max(0,a-e.discountValue),console.log(`Product ${s.name}: ${a} -> ${l}`);const r=d(o({},s),{isFlashSale:!0,flashSalePrice:l,retailPrice:l,originalRetailPrice:a,originalResellerPrice:t});return console.log("Updated product:",r),r}return s})),setTimeout(()=>{console.log("Products after flash sale update:",s.filter(s=>e.productIds.includes(s.id)))},100)},x=e=>{console.log("Removing flash sale from products:",e),a(s=>s.map(s=>e.includes(s.id)&&s.isFlashSale?d(o({},s),{isFlashSale:!1,flashSalePrice:0,retailPrice:s.originalRetailPrice||s.retailPrice,resellerPrice:s.originalResellerPrice||s.resellerPrice,originalRetailPrice:void 0,originalResellerPrice:void 0}):s))};return m.useEffect(()=>{c(e,null,function*(){l(!0),yield new Promise(e=>setTimeout(e,1e3));const e=we.map(e=>d(o({},e),{status:"ready"===e.status?"ready":"po",images:e.images.map(e=>e.includes("pexels-photo")?"https://images.pexels.com/photos/6311475/pexels-photo-6311475.jpeg":e),createdAt:e.createdAt instanceof Date?e.createdAt:new Date(e.createdAt)}));console.log("✅ Products loaded successfully:",e.length),console.log("✅ Featured products:",e.filter(e=>e.isFeatured).length),a(e),l(!1)})},[]),m.useEffect(()=>{const e=e=>(e=>{console.log("Flash sale created event:",e.detail);const s=e.detail;i(e=>[...e,{type:"created",flashSale:s,timestamp:new Date}]),n(s),setTimeout(()=>{a(e=>(console.log("Force updating products after flash sale creation"),e.map(e=>{if(s.productIds.includes(e.id)){const a=e.originalRetailPrice||e.retailPrice;let t=a;return t="percentage"===s.discountType?Math.round(a*(1-s.discountValue/100)):Math.max(0,a-s.discountValue),d(o({},e),{isFlashSale:!0,flashSalePrice:t,retailPrice:t,originalRetailPrice:a,originalResellerPrice:e.originalResellerPrice||e.resellerPrice})}return e})))},500)})(e),s=e=>(e=>{console.log("Flash sale updated event:",e.detail);const s=e.detail;i(e=>[...e,{type:"updated",flashSale:s,timestamp:new Date}]),s.isActive?n(s):x(s.productIds)})(e),t=e=>(e=>{console.log("Flash sale deleted event:",e.detail);const s=e.detail;i(e=>[...e,{type:"deleted",flashSale:s,timestamp:new Date}]),x(s.productIds)})(e);return window.addEventListener("flashSaleCreated",e),window.addEventListener("flashSaleUpdated",s),window.addEventListener("flashSaleDeleted",t),()=>{window.removeEventListener("flashSaleCreated",e),window.removeEventListener("flashSaleUpdated",s),window.removeEventListener("flashSaleDeleted",t)}},[n,x]),{products:s,loading:t,updateProductStock:(e,s)=>{a(a=>a.map(a=>a.id===e?d(o({},a),{stock:Math.max(0,a.stock-s)}):a))},applyFlashSaleToProducts:n,removeFlashSaleFromProducts:x,flashSaleEvents:r}},Se=({onBack:e})=>{const{flashSales:s,createFlashSale:a,updateFlashSale:t,deleteFlashSale:l}=oe(),{products:r,applyFlashSaleToProducts:i,removeFlashSaleFromProducts:n}=ke(),[c,x]=m.useState("list"),[h,u]=m.useState(!1),[p,g]=m.useState(null),[b,f]=m.useState([]),[N,y]=m.useState(""),[w,k]=m.useState("all"),[P,C]=m.useState("newest"),[D,T]=m.useState({name:"",startDate:"",startTime:"",endDate:"",endTime:"",discountType:"fixed",discountValue:0});m.useEffect(()=>{const e=()=>{const e=new Date;s.forEach(s=>{const a=s.startDate<=e&&s.endDate>=e;s.isActive&&e>s.endDate?(t(s.id,{isActive:!1}),n(s.productIds)):!s.isActive&&a&&(t(s.id,{isActive:!0}),i(s))})},a=setInterval(e,6e4);return e(),()=>clearInterval(a)},[s,t,i,n]);const L=e=>{const{name:s,value:a}=e.target;T(e=>d(o({},e),{[s]:"discountValue"===s?parseFloat(a)||0:a}))},R=()=>{T({name:"",startDate:"",startTime:"",endDate:"",endTime:"",discountType:"fixed",discountValue:0}),f([]),u(!1),g(null)},F=()=>{let e=r.filter(e=>{const s=e.name.toLowerCase().includes(N.toLowerCase()),a="all"===w||e.category===w;return s&&a});return e.sort((e,s)=>{switch(P){case"newest":return s.createdAt.getTime()-e.createdAt.getTime();case"oldest":return e.createdAt.getTime()-s.createdAt.getTime();case"name":return e.name.localeCompare(s.name);case"price":return e.retailPrice-s.retailPrice;default:return 0}}),e};return le.jsxs("div",{className:"min-h-screen bg-gray-50",children:[le.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-pink-500 text-white p-4",children:[le.jsxs("div",{className:"flex items-center justify-between mb-4",children:[le.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full",children:le.jsx(S,{className:"w-6 h-6"})}),le.jsx("h1",{className:"text-xl font-bold",children:"Kelola Flash Sale"}),le.jsx("button",{onClick:()=>u(!0),className:"bg-white/20 p-2 rounded-full hover:bg-white/30",children:le.jsx(A,{className:"w-6 h-6"})})]}),le.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[le.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[le.jsx("p",{className:"text-sm opacity-90",children:"Total Flash Sale"}),le.jsx("p",{className:"text-lg font-bold",children:s.length})]}),le.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[le.jsx("p",{className:"text-sm opacity-90",children:"Aktif"}),le.jsx("p",{className:"text-lg font-bold",children:s.filter(e=>e.isActive).length})]}),le.jsxs("div",{className:"bg-white/10 rounded-lg p-3 text-center",children:[le.jsx("p",{className:"text-sm opacity-90",children:"Produk"}),le.jsx("p",{className:"text-lg font-bold",children:s.reduce((e,s)=>e+s.productIds.length,0)})]})]})]}),le.jsx("div",{className:"bg-white shadow-sm",children:le.jsx("div",{className:"flex overflow-x-auto px-4",children:[{id:"list",label:"Daftar Flash Sale"},{id:"products",label:"Pilih Produk"}].map(e=>le.jsx("button",{onClick:()=>x(e.id),className:"flex-shrink-0 px-4 py-3 font-medium border-b-2 transition-colors "+(c===e.id?"border-red-500 text-red-600":"border-transparent text-gray-600 hover:text-gray-800"),children:e.label},e.id))})}),le.jsxs("div",{className:"p-4",children:["list"===c&&le.jsx("div",{className:"space-y-4",children:0===s.length?le.jsxs("div",{className:"text-center py-12",children:[le.jsx(j,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),le.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Belum Ada Flash Sale"}),le.jsx("p",{className:"text-gray-500 mb-4",children:"Buat flash sale pertama Anda"}),le.jsx("button",{onClick:()=>u(!0),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600",children:"Buat Flash Sale"})]}):s.map(e=>{const s=(e=>{const s=new Date;return s<e.startDate?{status:"scheduled",label:"Terjadwal",color:"bg-blue-100 text-blue-600"}:s>=e.startDate&&s<=e.endDate&&e.isActive?{status:"active",label:"Aktif",color:"bg-green-100 text-green-600"}:s>e.endDate?{status:"ended",label:"Selesai",color:"bg-gray-100 text-gray-600"}:{status:"inactive",label:"Nonaktif",color:"bg-red-100 text-red-600"}})(e);return le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsxs("div",{className:"flex items-start justify-between mb-3",children:[le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold text-lg",children:e.name}),le.jsxs("p",{className:"text-sm text-gray-600",children:[e.startDate.toLocaleDateString("id-ID")," ",e.startDate.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})," -",e.endDate.toLocaleDateString("id-ID")," ",e.endDate.toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})]}),le.jsxs("p",{className:"text-sm text-gray-600",children:[e.productIds.length," produk •","percentage"===e.discountType?` ${e.discountValue}% off`:` Rp ${e.discountValue.toLocaleString("id-ID")} off`]})]}),le.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${s.color}`,children:s.label})]}),le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsxs("button",{onClick:()=>(e=>{g(e),T({name:e.name,startDate:e.startDate.toISOString().split("T")[0],startTime:e.startDate.toTimeString().slice(0,5),endDate:e.endDate.toISOString().split("T")[0],endTime:e.endDate.toTimeString().slice(0,5),discountType:e.discountType,discountValue:e.discountValue}),f(e.productIds),u(!0)})(e),className:"flex items-center space-x-1 text-blue-600 hover:text-blue-700 text-sm",children:[le.jsx(z,{className:"w-4 h-4"}),le.jsx("span",{children:"Edit"})]}),le.jsxs("button",{onClick:()=>(e=>{const s=!e.isActive;t(e.id,{isActive:s}),alert(`Flash sale ${s?"diaktifkan":"dinonaktifkan"}!`)})(e),className:"flex items-center space-x-1 text-sm "+(e.isActive?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"),children:[e.isActive?le.jsx(E,{className:"w-4 h-4"}):le.jsx(W,{className:"w-4 h-4"}),le.jsx("span",{children:e.isActive?"Nonaktifkan":"Aktifkan"})]}),le.jsxs("button",{onClick:()=>(e=>{confirm("Yakin ingin menghapus flash sale ini?")&&(n(e.productIds),l(e.id))})(e),className:"flex items-center space-x-1 text-red-600 hover:text-red-700 text-sm",children:[le.jsx(I,{className:"w-4 h-4"}),le.jsx("span",{children:"Hapus"})]})]})]},e.id)})}),"products"===c&&le.jsxs("div",{className:"space-y-4",children:[le.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:le.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[le.jsxs("div",{className:"relative",children:[le.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),le.jsx("input",{type:"text",placeholder:"Cari produk...",value:N,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),le.jsxs("select",{value:w,onChange:e=>k(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua Kategori"}),["all","hijab","gamis","khimar","tunik","abaya"].slice(1).map(e=>le.jsx("option",{value:e,className:"capitalize",children:e},e))]}),le.jsxs("select",{value:P,onChange:e=>C(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[le.jsx("option",{value:"newest",children:"Terbaru"}),le.jsx("option",{value:"oldest",children:"Terlama"}),le.jsx("option",{value:"name",children:"Nama A-Z"}),le.jsx("option",{value:"price",children:"Harga Terendah"})]}),le.jsx("button",{onClick:()=>{const e=F().map(e=>e.id);f(s=>s.length===e.length?[]:e)},className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600",children:b.length===F().length?"Batal Pilih Semua":"Pilih Semua"})]})}),b.length>0&&le.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:le.jsxs("p",{className:"text-red-800 font-medium",children:[b.length," produk dipilih untuk flash sale"]})}),le.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:F().map(e=>le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 cursor-pointer transition-all "+(b.includes(e.id)?"ring-2 ring-red-500 bg-red-50":"hover:shadow-md"),onClick:()=>{return s=e.id,void f(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},children:[le.jsxs("div",{className:"relative",children:[le.jsx("img",{src:e.images[0],alt:e.name,className:"w-full h-32 object-cover rounded-lg mb-3"}),b.includes(e.id)&&le.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1",children:le.jsx(W,{className:"w-4 h-4"})}),e.isFlashSale&&le.jsx("div",{className:"absolute top-2 left-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:"FLASH SALE"})]}),le.jsx("h3",{className:"font-semibold mb-2 line-clamp-2",children:e.name}),le.jsx("div",{className:"space-y-1",children:e.isFlashSale&&e.originalRetailPrice?le.jsxs(le.Fragment,{children:[le.jsxs("div",{className:"text-lg font-bold text-red-600",children:["Rp ",e.retailPrice.toLocaleString("id-ID")]}),le.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["Rp ",e.originalRetailPrice.toLocaleString("id-ID")]})]}):le.jsxs("div",{className:"text-lg font-bold text-gray-800",children:["Rp ",e.retailPrice.toLocaleString("id-ID")]})}),le.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm",children:[le.jsxs("span",{className:"text-gray-600",children:["Stok: ",e.stock]}),le.jsx("span",{className:"capitalize text-gray-600",children:e.category})]}),le.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Dibuat: ",e.createdAt.toLocaleDateString("id-ID")]})]},e.id))})]})]}),h&&le.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:le.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[le.jsx("h2",{className:"text-xl font-bold mb-4",children:p?"Edit Flash Sale":"Buat Flash Sale Baru"}),le.jsxs("div",{className:"space-y-4",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Flash Sale"}),le.jsx("input",{type:"text",name:"name",value:D.name,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"Contoh: Flash Sale Ramadan"})]}),le.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Mulai"}),le.jsx("input",{type:"date",name:"startDate",value:D.startDate,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam Mulai"}),le.jsx("input",{type:"time",name:"startTime",value:D.startTime,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),le.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Selesai"}),le.jsx("input",{type:"date",name:"endDate",value:D.endDate,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jam Selesai"}),le.jsx("input",{type:"time",name:"endTime",value:D.endTime,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]})]}),le.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Diskon"}),le.jsxs("select",{name:"discountType",value:D.discountType,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",children:[le.jsx("option",{value:"fixed",children:"Nominal (Rp)"}),le.jsx("option",{value:"percentage",children:"Persentase (%)"})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nilai Diskon"}),le.jsx("input",{type:"number",name:"discountValue",value:D.discountValue,onChange:L,className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent",placeholder:"percentage"===D.discountType?"10":"100000"})]})]}),le.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[le.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Produk Dipilih: ",le.jsx("span",{className:"font-semibold",children:b.length})]}),0===b.length&&le.jsx("p",{className:"text-sm text-red-600",children:'Pilih produk di tab "Pilih Produk" terlebih dahulu'})]})]}),le.jsxs("div",{className:"flex space-x-3 mt-6",children:[le.jsx("button",{onClick:R,className:"flex-1 bg-gray-100 text-gray-600 py-3 rounded-lg hover:bg-gray-200",children:"Batal"}),le.jsxs("button",{onClick:()=>{if(!D.name||!D.startDate||!D.endDate||0===b.length)return void alert("Mohon lengkapi semua data");const e=new Date(`${D.startDate}T${D.startTime||"00:00"}`),s=new Date(`${D.endDate}T${D.endTime||"23:59"}`);if(e>=s)return void alert("Tanggal mulai harus lebih awal dari tanggal selesai");const l=new Date,r={name:D.name,startDate:e,endDate:s,isActive:e<=l&&s>=l,productIds:b,discountType:D.discountType,discountValue:D.discountValue};console.log("Submitting flash sale:",r),console.log("Selected products for flash sale:",b);try{p?(t(p.id,r),console.log("Flash sale updated successfully"),alert("Flash sale berhasil diupdate!")):(a(r),console.log("Flash sale created successfully"),alert("Flash sale berhasil dibuat! Cek halaman produk untuk melihat perubahan harga.")),setTimeout(()=>{R()},1e3)}catch(i){console.error("Error creating/updating flash sale:",i),alert("Terjadi kesalahan saat membuat flash sale")}},className:"flex-1 bg-red-500 text-white py-3 rounded-lg hover:bg-red-600",children:[p?"Update":"Buat"," Flash Sale"]})]})]})})]})},Pe=({onBack:s})=>{const[a,t]=m.useState([]),[l,r]=m.useState(!0),[i,n]=m.useState(""),[x,h]=m.useState(!1),[p,b]=m.useState([]);m.useState(null),m.useEffect(()=>{j()},[]);const j=()=>c(e,null,function*(){try{const e=[{id:"1",name:"Hijab Segi Empat Premium",category:"hijab",images:["https://images.pexels.com/photos/8839887/pexels-photo-8839887.jpeg?auto=compress&cs=tinysrgb&w=400"],retailPrice:85e3,resellerPrice:65e3,stock:25,status:"ready",salesCount:15,isFeatured:!0,featuredOrder:1},{id:"2",name:"Gamis Syari Elegant",category:"gamis",images:["https://images.pexels.com/photos/9594673/pexels-photo-9594673.jpeg?auto=compress&cs=tinysrgb&w=400"],retailPrice:25e4,resellerPrice:2e5,stock:15,status:"ready",salesCount:28,isFeatured:!0,featuredOrder:2},{id:"3",name:"Khimar Instant Premium",category:"khimar",images:["https://images.pexels.com/photos/8839889/pexels-photo-8839889.jpeg?auto=compress&cs=tinysrgb&w=400"],retailPrice:12e4,resellerPrice:95e3,stock:8,status:"po",salesCount:8,isFeatured:!1,featuredOrder:0},{id:"4",name:"Tunik Casual Modern",category:"tunik",images:["https://images.pexels.com/photos/9594675/pexels-photo-9594675.jpeg?auto=compress&cs=tinysrgb&w=400"],retailPrice:18e4,resellerPrice:145e3,stock:20,status:"ready",salesCount:22,isFeatured:!0,featuredOrder:3},{id:"5",name:"Abaya Dubai Premium",category:"abaya",images:["https://images.pexels.com/photos/8839890/pexels-photo-8839890.jpeg?auto=compress&cs=tinysrgb&w=400"],retailPrice:35e4,resellerPrice:28e4,stock:12,status:"ready",salesCount:18,isFeatured:!0,featuredOrder:4},{id:"6",name:"Hijab Pashmina Silk",category:"hijab",images:["https://images.pexels.com/photos/8839891/pexels-photo-8839891.jpeg?auto=compress&cs=tinysrgb&w=400"],retailPrice:95e3,resellerPrice:75e3,stock:30,status:"ready",salesCount:35,isFeatured:!1,featuredOrder:0}],s=e.filter(e=>e.isFeatured).sort((e,s)=>(e.featuredOrder||0)-(s.featuredOrder||0));t(e),b(s)}catch(e){console.error("Error fetching products:",e)}finally{r(!1)}}),f=s=>c(e,null,function*(){const e=a.find(e=>e.id===s);if(e){h(!0);try{if(e.isFeatured){t(a.map(e=>e.id===s?d(o({},e),{isFeatured:!1,featuredOrder:0}):e)),b(p.filter(e=>e.id!==s));const e=p.filter(e=>e.id!==s).map((e,s)=>d(o({},e),{featuredOrder:s+1}));b(e)}else{if(p.length>=4)return void alert("Maksimal 4 produk unggulan!");const l=d(o({},e),{isFeatured:!0,featuredOrder:p.length+1});t(a.map(e=>e.id===s?l:e)),b([...p,l])}console.log("Featured products updated:",p)}catch(l){console.error("Error updating featured status:",l),alert("Gagal memperbarui status unggulan")}finally{h(!1)}}}),N=(s,l)=>c(e,null,function*(){const e=p.findIndex(e=>e.id===s);if(-1===e)return;const r="up"===l?e-1:e+1;if(!(r<0||r>=p.length)){h(!0);try{const s=[...p],[l]=s.splice(e,1);s.splice(r,0,l);const i=s.map((e,s)=>d(o({},e),{featuredOrder:s+1}));b(i),t(a.map(e=>{const s=i.find(s=>s.id===e.id);return s||e})),console.log("Products reordered:",i)}catch(i){console.error("Error reordering products:",i),alert("Gagal mengurutkan ulang produk")}finally{h(!1)}}}),y=a.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.category.toLowerCase().includes(i.toLowerCase()));return l?le.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:le.jsxs("div",{className:"text-center",children:[le.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-500 mx-auto mb-4"}),le.jsx("p",{className:"text-gray-600",children:"Loading produk..."})]})}):le.jsxs("div",{className:"min-h-screen bg-gray-50",children:[le.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-orange-600 text-white p-4",children:[le.jsxs("div",{className:"flex items-center justify-between",children:[le.jsx("button",{onClick:s,className:"p-2 hover:bg-white/20 rounded-full",children:le.jsx(S,{className:"w-6 h-6"})}),le.jsx("h1",{className:"text-xl font-bold",children:"Kelola Produk Unggulan"}),le.jsx("div",{className:"w-10"})]}),le.jsx("p",{className:"text-center mt-2 text-yellow-100",children:"Pilih hingga 4 produk untuk ditampilkan di halaman utama"})]}),le.jsxs("div",{className:"p-4",children:[le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:[le.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center",children:[le.jsx(u,{className:"w-5 h-5 text-yellow-500 mr-2"}),"Produk Unggulan (",p.length,"/4)"]}),0===p.length?le.jsxs("div",{className:"text-center py-8 text-gray-500",children:[le.jsx(u,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),le.jsx("p",{children:"Belum ada produk unggulan"}),le.jsx("p",{className:"text-sm",children:"Pilih produk dari daftar di bawah"})]}):le.jsx("div",{className:"space-y-3",children:p.map((e,s)=>le.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-yellow-200 bg-yellow-50 rounded-lg",children:[le.jsx("img",{src:e.images[0]||"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400",alt:e.name,className:"w-16 h-16 object-cover rounded-lg"}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold",children:e.name}),le.jsx("p",{className:"text-sm text-gray-600",children:e.category}),le.jsxs("p",{className:"text-sm font-semibold text-pink-600",children:["Rp ",e.retailPrice.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsx("button",{onClick:()=>N(e.id,"up"),disabled:0===s||x,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-50",children:le.jsx(g,{className:"w-4 h-4"})}),le.jsx("span",{className:"text-sm font-medium w-4 text-center",children:s+1}),le.jsx("button",{onClick:()=>N(e.id,"down"),disabled:s===p.length-1||x,className:"p-1 rounded hover:bg-gray-200 disabled:opacity-50",children:le.jsx(X,{className:"w-4 h-4"})}),le.jsx("button",{onClick:()=>f(e.id),disabled:x,className:"p-1 rounded hover:bg-red-100 text-red-600",children:le.jsx(E,{className:"w-4 h-4"})})]})]},e.id))})]}),le.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4",children:le.jsxs("div",{className:"relative",children:[le.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),le.jsx("input",{type:"text",placeholder:"Cari produk...",value:i,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-yellow-500 focus:border-transparent"})]})}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Semua Produk"}),le.jsx("div",{className:"space-y-3",children:y.filter(e=>!e.isFeatured).slice(0,20).map(e=>le.jsxs("div",{className:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[le.jsx("img",{src:e.images[0]||"https://images.pexels.com/photos/3184291/pexels-photo-3184291.jpeg?auto=compress&cs=tinysrgb&w=400",alt:e.name,className:"w-16 h-16 object-cover rounded-lg"}),le.jsxs("div",{className:"flex-1",children:[le.jsx("h3",{className:"font-semibold",children:e.name}),le.jsx("p",{className:"text-sm text-gray-600",children:e.category}),le.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[le.jsxs("span",{className:"font-semibold text-pink-600",children:["Rp ",e.retailPrice.toLocaleString("id-ID")]}),le.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-medium "+("ready"===e.status?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"),children:e.status}),le.jsxs("span",{className:"text-gray-500",children:["Stok: ",e.stock]}),e.salesCount&&e.salesCount>0&&le.jsxs("span",{className:"text-gray-500",children:["Terjual: ",e.salesCount]})]})]}),le.jsx("button",{onClick:()=>f(e.id),disabled:x||p.length>=4,className:"p-2 rounded-lg transition-colors "+(p.length>=4?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-yellow-100 text-yellow-700 hover:bg-yellow-200"),children:le.jsx(A,{className:"w-5 h-5"})})]},e.id))})]})]})]})},Ce=({onBack:e,user:s})=>{console.log("AdminDashboard rendered - User role:",null==s?void 0:s.role),console.log("User object:",s),console.log("Is owner?","owner"===(null==s?void 0:s.role)),console.log("Tabs to show:","owner"===(null==s?void 0:s.role)?["overview","orders","reports","featured","flashsale"]:["overview","orders","reports"]);const{orders:a,updateOrderStatus:t,updateOrderPayment:l,getOrdersByStatus:r,getTotalRevenue:i,getTodayOrders:n}=oe(),[o,d]=m.useState("overview"),[c,x]=m.useState("sales"),[h,p]=m.useState("today"),[g,b]=m.useState((new Date).toISOString().split("T")[0]),[j,f]=m.useState((new Date).toISOString().split("T")[0]),[N,y]=m.useState("all"),[w,k]=m.useState("all"),[P,C]=m.useState("delivered"),[D,A]=m.useState("all"),[T,I]=m.useState("all"),[F,M]=m.useState(null),[O,B]=m.useState("");m.useState("all");const[z,E]=m.useState(!1),[K,$]=m.useState(!1),U={pending:{label:"Menunggu Pembayaran",icon:V,color:"text-orange-600 bg-orange-100"},awaiting_verification:{label:"Menunggu Verifikasi",icon:V,color:"text-yellow-600 bg-yellow-100"},paid:{label:"Dibayar",icon:L,color:"text-blue-600 bg-blue-100"},processing:{label:"Diproses",icon:R,color:"text-purple-600 bg-purple-100"},shipped:{label:"Dikirim",icon:H,color:"text-indigo-600 bg-indigo-100"},delivered:{label:"Selesai",icon:L,color:"text-green-600 bg-green-100"},cancelled:{label:"Dibatalkan",icon:q,color:"text-red-600 bg-red-100"}},_={totalOrders:a.length,todayOrders:n().length,totalRevenue:i(),pendingOrders:r("pending").length,awaitingVerification:r("awaiting_verification").length,processingOrders:r("processing").length,completedOrders:r("delivered").length};(()=>{const e=new Date;let s=new Date;switch(h){case"today":s.setHours(0,0,0,0);break;case"week":s.setDate(e.getDate()-7);break;case"month":s.setMonth(e.getMonth()-1);break;case"year":s.setFullYear(e.getFullYear()-1)}const t=a.filter(e=>e.createdAt>=s),l=t.filter(e=>"delivered"===e.status),r=(l.reduce((e,s)=>e+s.finalTotal,0),t.length,{});l.forEach(e=>{e.items.forEach(e=>{r[e.productId]||(r[e.productId]={name:e.productName,quantity:0,revenue:0}),r[e.productId].quantity+=e.quantity,r[e.productId].revenue+=e.total})});Object.values(r).sort((e,s)=>s.revenue-e.revenue).slice(0,5);const i={};l.forEach(e=>{i[e.userId]||(i[e.userId]={name:e.userName,orders:0,revenue:0}),i[e.userId].orders+=1,i[e.userId].revenue+=e.finalTotal}),Object.values(i).sort((e,s)=>s.revenue-e.revenue).slice(0,5),t.filter(e=>"pending"===e.status).length,t.filter(e=>"awaiting_verification"===e.status).length,t.filter(e=>"paid"===e.status).length,t.filter(e=>"processing"===e.status).length,t.filter(e=>"shipped"===e.status).length,t.filter(e=>"delivered"===e.status).length,t.filter(e=>"cancelled"===e.status).length,l.length})();const J=a.filter(e=>{const s=e.id.toLowerCase().includes(O.toLowerCase())||e.userName.toLowerCase().includes(O.toLowerCase()),a="all"===P||e.status===P;return s&&a});if(z)return le.jsx(Se,{onBack:()=>E(!1)});if(K)return le.jsx(Pe,{onBack:()=>$(!1)});const G=(e,s)=>{t(e,s),M(null)},W=()=>{const e=new Date(g),s=new Date(j);return s.setHours(23,59,59,999),a.filter(a=>{const t=new Date(a.createdAt),l=t>=e&&t<=s,r="all"===P||a.status===P,i="all"===D||a.userId===D,n="all"===T||a.paymentMethod===T;return l&&r&&i&&n})},X=()=>{const e=[{product:"Hijab Segi Empat Premium",stok:25,modal:45e3,category:"hijab"},{product:"Gamis Syari Elegant",stok:15,modal:15e4,category:"gamis"},{product:"Khimar Instant Premium",stok:8,modal:7e4,category:"khimar"},{product:"Tunik Casual Modern",stok:20,modal:11e4,category:"tunik"},{product:"Abaya Dubai Premium",stok:12,modal:22e4,category:"abaya"},{product:"Hijab Pashmina Silk",stok:30,modal:55e3,category:"hijab"}];return"all"===w?e:e.filter(e=>e.category===w)};return F?le.jsxs("div",{className:"min-h-screen bg-gray-50",children:[le.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:le.jsxs("div",{className:"flex items-center p-4",children:[le.jsx("button",{onClick:()=>M(null),className:"mr-4",children:le.jsx(S,{className:"w-6 h-6 text-gray-600"})}),le.jsxs("h1",{className:"text-lg font-semibold",children:["Detail Pesanan #",F.id]})]})}),le.jsxs("div",{className:"p-4 space-y-4",children:[le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Status Pesanan"}),le.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(U).filter(([e])=>"owner"===(null==s?void 0:s.role)||"admin"!==(null==s?void 0:s.role)||["processing","shipped","delivered","cancelled"].includes(e)).map(([e,a])=>{const t=a.icon,l="admin"===(null==s?void 0:s.role)&&["processing","shipped","delivered","cancelled"].includes(e)&&"paid"!==F.status;return le.jsx("button",{onClick:()=>G(F.id,e),disabled:l,className:"p-3 rounded-lg border-2 transition-all "+(F.status===e?"border-pink-500 bg-pink-50":l?"border-gray-100 bg-gray-50 opacity-50 cursor-not-allowed":"border-gray-200 hover:border-gray-300"),children:le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsx(t,{className:"w-4 h-4"}),le.jsx("span",{className:"text-sm font-medium",children:a.label}),l&&"paid"!==F.status&&le.jsx("span",{className:"text-xs text-gray-400",children:"(Belum Diverifikasi)"})]})},e)})}),"admin"===(null==s?void 0:s.role)&&"paid"!==F.status&&le.jsx("div",{className:"mt-3 bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:le.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"⚠️ Pesanan harus diverifikasi Owner terlebih dahulu"})})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Informasi Pelanggan"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Nama:"}),le.jsx("span",{className:"font-medium",children:F.userName})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Email:"}),le.jsx("span",{className:"font-medium",children:F.userEmail})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{className:"text-gray-600",children:"Telepon:"}),le.jsx("span",{className:"font-medium",children:F.shippingInfo.phone})]})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Informasi Pengiriman"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{children:[le.jsx("span",{className:"text-gray-600",children:"Alamat:"}),le.jsx("p",{className:"font-medium mt-1",children:F.shippingInfo.address})]}),F.shippingInfo.isDropship&&le.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[le.jsx("p",{className:"text-blue-800 font-medium text-sm",children:"Dropship Order"}),le.jsxs("p",{className:"text-blue-600 text-sm",children:["Pengirim: ",F.shippingInfo.dropshipName," (",F.shippingInfo.dropshipPhone,")"]})]})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Produk Pesanan"}),le.jsx("div",{className:"space-y-3",children:F.items.map((e,s)=>le.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100 last:border-b-0",children:[le.jsxs("div",{className:"flex-1",children:[le.jsx("p",{className:"font-medium",children:e.productName}),le.jsxs("p",{className:"text-sm text-gray-600",children:[e.selectedVariant.size," - ",e.selectedVariant.color," × ",e.quantity]})]}),le.jsxs("div",{className:"text-right",children:[le.jsxs("p",{className:"font-semibold",children:["Rp ",e.total.toLocaleString("id-ID")]}),le.jsxs("p",{className:"text-sm text-gray-600",children:["@Rp ",e.price.toLocaleString("id-ID")]})]})]},s))})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Ringkasan Pembayaran"}),le.jsxs("div",{className:"space-y-2 text-sm",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Subtotal:"}),le.jsxs("span",{children:["Rp ",F.totalAmount.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Ongkir:"}),le.jsxs("span",{children:["Rp ",F.shippingCost.toLocaleString("id-ID")]})]}),le.jsx("div",{className:"border-t pt-2 mt-2",children:le.jsxs("div",{className:"flex justify-between font-semibold",children:[le.jsx("span",{children:"Total:"}),le.jsxs("span",{className:"text-pink-600",children:["Rp ",F.finalTotal.toLocaleString("id-ID")]})]})}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Metode Pembayaran:"}),le.jsx("span",{className:"capitalize",children:"transfer"===F.paymentMethod?"Transfer Bank":"Cash on Delivery"})]}),F.paymentProof&&le.jsxs("div",{className:"border-t pt-2 mt-2",children:[le.jsx("span",{className:"text-gray-600 block mb-2",children:"Bukti Pembayaran:"}),F.paymentProof&&!F.paymentProofUrl&&le.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-2",children:[le.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"⏳ Bukti pembayaran telah diupload"}),le.jsxs("p",{className:"text-yellow-600 text-xs",children:["File: ",F.paymentProof]}),le.jsx("p",{className:"text-yellow-600 text-xs",children:"Menunggu verifikasi admin"})]}),F.paymentProofUrl&&le.jsxs("div",{children:[le.jsx("img",{src:F.paymentProofUrl||"https://images.pexels.com/photos/4386321/pexels-photo-4386321.jpeg?auto=compress&cs=tinysrgb&w=400",alt:"Bukti Pembayaran",className:"w-full max-w-xs rounded-lg border"}),le.jsx("p",{className:"text-xs text-gray-500 mt-1",children:F.paymentProof}),le.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Terakhir diupdate: ",F.updatedAt.toLocaleString("id-ID")]}),le.jsxs("div",{className:"mt-2",children:["awaiting_verification"===F.status&&"owner"===(null==s?void 0:s.role)&&le.jsx("button",{onClick:()=>G(F.id,"paid"),className:"bg-green-500 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"✅ Verifikasi Pembayaran"}),"awaiting_verification"===F.status&&"admin"===(null==s?void 0:s.role)&&le.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:le.jsx("p",{className:"text-yellow-800 text-sm font-medium",children:"⚠️ Hanya Owner yang dapat memverifikasi pembayaran"})})]})]})]})]})]})]})]}):le.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[le.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 text-white p-4",children:[le.jsxs("div",{className:"flex items-center justify-between mb-4",children:[le.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-full",children:le.jsx(S,{className:"w-6 h-6"})}),le.jsx("h1",{className:"text-xl font-bold",children:"Admin Dashboard"}),le.jsx("div",{className:"w-10"})]}),le.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[le.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsx(R,{className:"w-5 h-5"}),le.jsxs("div",{children:[le.jsx("p",{className:"text-sm opacity-90",children:"Total Pesanan"}),le.jsx("p",{className:"text-lg font-bold",children:_.totalOrders})]})]})}),le.jsx("div",{className:"bg-white/10 rounded-lg p-3",children:le.jsxs("div",{className:"flex items-center space-x-2",children:[le.jsx(Z,{className:"w-5 h-5"}),le.jsxs("div",{children:[le.jsx("p",{className:"text-sm opacity-90",children:"Total Revenue"}),le.jsxs("p",{className:"text-lg font-bold",children:["Rp ",(_.totalRevenue/1e6).toFixed(1),"M"]})]})]})})]}),le.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[le.jsxs("div",{className:"bg-white/10 rounded-lg p-2",children:[le.jsx("p",{className:"text-xs opacity-90",children:"Hari Ini"}),le.jsx("p",{className:"font-bold",children:_.todayOrders})]}),le.jsxs("div",{className:"bg-white/10 rounded-lg p-2",children:[le.jsx("p",{className:"text-xs opacity-90",children:"Verifikasi"}),le.jsx("p",{className:"font-bold",children:_.awaitingVerification})]}),le.jsxs("div",{className:"bg-white/10 rounded-lg p-2",children:[le.jsx("p",{className:"text-xs opacity-90",children:"Selesai"}),le.jsx("p",{className:"font-bold",children:_.completedOrders})]})]})]}),le.jsx("div",{className:"bg-white shadow-sm",children:le.jsx("div",{className:"flex overflow-x-auto px-4",children:[{id:"overview",label:"Overview"},{id:"orders",label:"Pesanan"},{id:"reports",label:"Laporan"},..."owner"===(null==s?void 0:s.role)?[{id:"featured",label:"Produk Unggulan"},{id:"flashsale",label:"Flash Sale"}]:[]].map(e=>le.jsx("button",{onClick:()=>d(e.id),className:"flex-shrink-0 px-4 py-3 font-medium border-b-2 transition-colors "+(o===e.id?"border-pink-500 text-pink-600":"border-transparent text-gray-600 hover:text-gray-800"),children:e.label},e.id))})}),le.jsxs("div",{className:"p-4",children:["overview"===o&&le.jsx("div",{className:"space-y-4",children:le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-3",children:"Pesanan Terbaru"}),le.jsx("div",{className:"space-y-3",children:a.slice(0,5).map(e=>{const s=U[e.status],a=s.icon;return le.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-100 rounded-lg",children:[le.jsxs("div",{className:"flex-1",children:[le.jsxs("p",{className:"font-medium",children:["#",e.id]}),le.jsx("p",{className:"text-sm text-gray-600",children:e.userName}),le.jsxs("p",{className:"text-sm font-semibold text-pink-600",children:["Rp ",e.finalTotal.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"text-right",children:[le.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:[le.jsx(a,{className:"w-3 h-3"}),le.jsx("span",{children:s.label})]}),le.jsx("p",{className:"text-xs text-gray-500 mt-1",children:e.createdAt.toLocaleDateString("id-ID")})]})]},e.id)})})]})}),"orders"===o&&le.jsxs("div",{className:"space-y-4",children:[le.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4",children:le.jsxs("div",{className:"flex space-x-3 mb-3",children:[le.jsxs("div",{className:"flex-1 relative",children:[le.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),le.jsx("input",{type:"text",placeholder:"Cari pesanan...",value:O,onChange:e=>B(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]}),le.jsxs("select",{value:P,onChange:e=>C(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua Status"}),Object.entries(U).map(([e,s])=>le.jsx("option",{value:e,children:s.label},e))]})]})}),le.jsx("div",{className:"space-y-3",children:J.map(e=>{const s=U[e.status],a=s.icon;return le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsxs("div",{className:"flex items-center justify-between mb-3",children:[le.jsxs("div",{children:[le.jsxs("p",{className:"font-semibold",children:["#",e.id]}),le.jsxs("p",{className:"text-sm text-gray-600",children:[e.userName," • ",e.userEmail]}),le.jsx("p",{className:"text-xs text-gray-500",children:e.createdAt.toLocaleDateString("id-ID")})]}),le.jsxs("div",{className:"text-right",children:[le.jsxs("div",{className:`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${s.color}`,children:[le.jsx(a,{className:"w-3 h-3"}),le.jsx("span",{children:s.label})]}),le.jsxs("p",{className:"text-sm font-semibold text-pink-600 mt-1",children:["Rp ",e.finalTotal.toLocaleString("id-ID")]})]})]}),le.jsxs("div",{className:"flex items-center justify-between",children:[le.jsxs("div",{className:"text-sm text-gray-600",children:[e.items.length," item • ","transfer"===e.paymentMethod?"Transfer":"COD"]}),le.jsxs("button",{onClick:()=>M(e),className:"flex items-center space-x-1 text-pink-600 hover:text-pink-700 text-sm font-medium",children:[le.jsx(Y,{className:"w-4 h-4"}),le.jsx("span",{children:"Detail"})]})]})]},e.id)})})]}),"reports"===o&&le.jsxs("div",{className:"space-y-4",children:[le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Jenis Laporan"}),le.jsxs("select",{value:c,onChange:e=>x(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"sales",children:"Laporan Penjualan"}),le.jsx("option",{value:"products",children:"Laporan Produk Terjual"}),le.jsx("option",{value:"inventory",children:"Laporan Persediaan"}),le.jsx("option",{value:"cashflow",children:"Laporan Arus Kas"}),le.jsx("option",{value:"profit-loss",children:"Laporan Rugi Laba"})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Mulai"}),le.jsx("input",{type:"date",value:g,onChange:e=>b(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Akhir"}),le.jsx("input",{type:"date",value:j,onChange:e=>f(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent"})]})]}),("products"===c||"cashflow"===c)&&le.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:["products"===c&&le.jsxs(le.Fragment,{children:[le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),le.jsxs("select",{value:P,onChange:e=>C(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua Status"}),le.jsx("option",{value:"delivered",children:"Selesai"}),le.jsx("option",{value:"processing",children:"Diproses"})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),le.jsxs("select",{value:w,onChange:e=>k(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua Kategori"}),le.jsx("option",{value:"hijab",children:"Hijab"}),le.jsx("option",{value:"gamis",children:"Gamis"}),le.jsx("option",{value:"khimar",children:"Khimar"})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"User"}),le.jsxs("select",{value:D,onChange:e=>A(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua User"}),le.jsx("option",{value:"1",children:"Customer"}),le.jsx("option",{value:"2",children:"Reseller"})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tampilan"}),le.jsxs("select",{value:N,onChange:e=>y(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Per Produk"}),le.jsx("option",{value:"category",children:"Per Kategori"})]})]})]}),"cashflow"===c&&le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Metode Pembayaran"}),le.jsxs("select",{value:T,onChange:e=>I(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua Metode"}),le.jsx("option",{value:"transfer",children:"Transfer"}),le.jsx("option",{value:"cash",children:"Cash"})]})]})]}),"inventory"===c&&le.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:le.jsxs("div",{children:[le.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategori"}),le.jsxs("select",{value:w,onChange:e=>k(e.target.value),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-transparent",children:[le.jsx("option",{value:"all",children:"Semua Kategori"}),le.jsx("option",{value:"hijab",children:"Hijab"}),le.jsx("option",{value:"gamis",children:"Gamis"}),le.jsx("option",{value:"khimar",children:"Khimar"}),le.jsx("option",{value:"tunik",children:"Tunik"}),le.jsx("option",{value:"abaya",children:"Abaya"})]})]})}),le.jsxs("button",{className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center space-x-2",children:[le.jsx(Q,{className:"w-4 h-4"}),le.jsx("span",{children:"Export Laporan"})]})]}),"sales"===c&&le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-4",children:"Laporan Penjualan Per Invoice"}),le.jsx("div",{className:"overflow-x-auto",children:le.jsxs("table",{className:"w-full text-sm",children:[le.jsx("thead",{className:"bg-gray-50",children:le.jsxs("tr",{children:[le.jsx("th",{className:"text-left p-3 font-semibold",children:"No Invoice"}),le.jsx("th",{className:"text-left p-3 font-semibold",children:"Tanggal"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Subtotal"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Modal"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Laba"})]})}),le.jsx("tbody",{children:W().map(e=>({invoice:e.id,date:e.createdAt.toLocaleDateString("id-ID"),subtotal:e.totalAmount,modal:e.items.reduce((e,s)=>e+45e3*s.quantity,0),laba:e.totalAmount-e.items.reduce((e,s)=>e+45e3*s.quantity,0)})).map((e,s)=>le.jsxs("tr",{className:"border-b border-gray-100",children:[le.jsx("td",{className:"p-3 font-medium",children:e.invoice}),le.jsx("td",{className:"p-3",children:e.date}),le.jsxs("td",{className:"p-3 text-right",children:["Rp ",e.subtotal.toLocaleString("id-ID")]}),le.jsxs("td",{className:"p-3 text-right",children:["Rp ",e.modal.toLocaleString("id-ID")]}),le.jsxs("td",{className:"p-3 text-right font-semibold text-green-600",children:["Rp ",e.laba.toLocaleString("id-ID")]})]},s))})]})})]}),"products"===c&&le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-4",children:"Laporan Produk Terjual"}),le.jsx("div",{className:"overflow-x-auto",children:le.jsxs("table",{className:"w-full text-sm",children:[le.jsx("thead",{className:"bg-gray-50",children:le.jsxs("tr",{children:[le.jsx("th",{className:"text-left p-3 font-semibold",children:"Produk"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Quantity"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Harga"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Modal"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Laba"})]})}),le.jsx("tbody",{children:(()=>{const e=W(),s={};return e.forEach(e=>{e.items.forEach(e=>{const a="category"===N?e.productName.split(" ")[0]:e.productName;s[a]||(s[a]={product:a,quantity:0,harga:e.price,modal:45e3,laba:0}),s[a].quantity+=e.quantity,s[a].laba+=(e.price-45e3)*e.quantity})}),Object.values(s)})().map((e,s)=>le.jsxs("tr",{className:"border-b border-gray-100",children:[le.jsx("td",{className:"p-3 font-medium",children:e.product}),le.jsx("td",{className:"p-3 text-right",children:e.quantity}),le.jsxs("td",{className:"p-3 text-right",children:["Rp ",e.harga.toLocaleString("id-ID")]}),le.jsxs("td",{className:"p-3 text-right",children:["Rp ",e.modal.toLocaleString("id-ID")]}),le.jsxs("td",{className:"p-3 text-right font-semibold text-green-600",children:["Rp ",e.laba.toLocaleString("id-ID")]})]},s))})]})})]}),"inventory"===c&&le.jsxs("div",{className:"space-y-4",children:[le.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[le.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Total Produk"}),le.jsx("p",{className:"text-2xl font-bold text-blue-600",children:X().length})]}),le.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Total Stok"}),le.jsx("p",{className:"text-2xl font-bold text-green-600",children:X().reduce((e,s)=>e+s.stok,0)})]}),le.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Total Modal"}),le.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:["Rp ",X().reduce((e,s)=>e+s.stok*s.modal,0).toLocaleString("id-ID")]})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-4",children:"Laporan Persediaan"}),le.jsx("div",{className:"overflow-x-auto",children:le.jsxs("table",{className:"w-full text-sm",children:[le.jsx("thead",{className:"bg-gray-50",children:le.jsxs("tr",{children:[le.jsx("th",{className:"text-left p-3 font-semibold",children:"Produk"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Stok"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Modal/Unit"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Total Modal"})]})}),le.jsx("tbody",{children:X().map((e,s)=>le.jsxs("tr",{className:"border-b border-gray-100",children:[le.jsx("td",{className:"p-3 font-medium",children:e.product}),le.jsx("td",{className:"p-3 text-right",children:e.stok}),le.jsxs("td",{className:"p-3 text-right",children:["Rp ",e.modal.toLocaleString("id-ID")]}),le.jsxs("td",{className:"p-3 text-right font-semibold",children:["Rp ",(e.stok*e.modal).toLocaleString("id-ID")]})]},s))})]})})]})]}),"cashflow"===c&&le.jsx("div",{className:"space-y-4",children:(()=>{const e=(()=>{const e=W(),s=5e6,a=e.reduce((e,s)=>e+s.finalTotal,0);return{previousBalance:s,sales:a,total:s+a,finalBalance:s+a,transactions:e.map(e=>({invoice:e.id,date:e.createdAt.toLocaleDateString("id-ID"),amount:e.finalTotal,method:"transfer"===e.paymentMethod?"Transfer":"Cash"}))}})();return le.jsxs(le.Fragment,{children:[le.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[le.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Saldo Sebelumnya"}),le.jsxs("p",{className:"text-xl font-bold text-blue-600",children:["Rp ",e.previousBalance.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Penjualan"}),le.jsxs("p",{className:"text-xl font-bold text-green-600",children:["Rp ",e.sales.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-purple-800 mb-2",children:"Total"}),le.jsxs("p",{className:"text-xl font-bold text-purple-600",children:["Rp ",e.total.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"Saldo Akhir"}),le.jsxs("p",{className:"text-xl font-bold text-orange-600",children:["Rp ",e.finalBalance.toLocaleString("id-ID")]})]})]}),le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-4",children:"Detail Transaksi"}),le.jsx("div",{className:"overflow-x-auto",children:le.jsxs("table",{className:"w-full text-sm",children:[le.jsx("thead",{className:"bg-gray-50",children:le.jsxs("tr",{children:[le.jsx("th",{className:"text-left p-3 font-semibold",children:"Invoice"}),le.jsx("th",{className:"text-left p-3 font-semibold",children:"Tanggal"}),le.jsx("th",{className:"text-left p-3 font-semibold",children:"Metode"}),le.jsx("th",{className:"text-right p-3 font-semibold",children:"Jumlah"})]})}),le.jsx("tbody",{children:e.transactions.map((e,s)=>le.jsxs("tr",{className:"border-b border-gray-100",children:[le.jsx("td",{className:"p-3 font-medium",children:e.invoice}),le.jsx("td",{className:"p-3",children:e.date}),le.jsx("td",{className:"p-3",children:e.method}),le.jsxs("td",{className:"p-3 text-right font-semibold text-green-600",children:["Rp ",e.amount.toLocaleString("id-ID")]})]},s))})]})})]})]})})()}),"profit-loss"===c&&le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4",children:[le.jsx("h3",{className:"font-semibold mb-4",children:"Laporan Rugi Laba"}),(()=>{const e=(()=>{const e=W().filter(e=>"delivered"===e.status),s=e.reduce((e,s)=>e+s.totalAmount,0),a=e.reduce((e,s)=>e+s.items.reduce((e,s)=>e+45e3*s.quantity,0),0),t=e.reduce((e,s)=>e+s.shippingCost,0),l=5e5,r=s+t,i=a+t+l;return{revenue:{sales:s,modal:a,shipping:t,total:r},expenses:{shipping:t,operational:l,total:i},profitLoss:r-i}})();return le.jsxs("div",{className:"space-y-6",children:[le.jsxs("div",{children:[le.jsx("h4",{className:"font-semibold text-lg mb-3 text-green-700",children:"PENDAPATAN"}),le.jsxs("div",{className:"space-y-2 ml-4",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Penjualan"}),le.jsxs("span",{children:["Rp ",e.revenue.sales.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Modal"}),le.jsxs("span",{children:["Rp ",e.revenue.modal.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Ongkir Penjualan"}),le.jsxs("span",{children:["Rp ",e.revenue.shipping.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[le.jsx("span",{children:"Total Pendapatan"}),le.jsxs("span",{children:["Rp ",e.revenue.total.toLocaleString("id-ID")]})]})]})]}),le.jsxs("div",{children:[le.jsx("h4",{className:"font-semibold text-lg mb-3 text-red-700",children:"BIAYA"}),le.jsxs("div",{className:"space-y-2 ml-4",children:[le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Ongkir Penjualan"}),le.jsxs("span",{children:["Rp ",e.expenses.shipping.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between",children:[le.jsx("span",{children:"Biaya Operasional"}),le.jsxs("span",{children:["Rp ",e.expenses.operational.toLocaleString("id-ID")]})]}),le.jsxs("div",{className:"flex justify-between font-semibold border-t pt-2",children:[le.jsx("span",{children:"Total Biaya"}),le.jsxs("span",{children:["Rp ",e.expenses.total.toLocaleString("id-ID")]})]})]})]}),le.jsx("div",{className:"border-t-2 border-gray-300 pt-4",children:le.jsxs("div",{className:"flex justify-between text-xl font-bold "+(e.profitLoss>=0?"text-green-600":"text-red-600"),children:[le.jsx("span",{children:e.profitLoss>=0?"LABA":"RUGI"}),le.jsxs("span",{children:["Rp ",Math.abs(e.profitLoss).toLocaleString("id-ID")]})]})})]})})()]})]}),"featured"===o&&"owner"===(null==s?void 0:s.role)&&le.jsx("div",{className:"space-y-4",children:le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[le.jsx("div",{className:"flex justify-center mb-4",children:le.jsx(u,{className:"w-16 h-16 text-yellow-500"})}),le.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Kelola Produk Unggulan"}),le.jsx("p",{className:"text-gray-600 mb-6",children:"Pilih hingga 4 produk untuk ditampilkan di halaman utama sebagai produk unggulan"}),le.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[le.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Maksimal Produk"}),le.jsx("p",{className:"text-2xl font-bold text-blue-600",children:"4"})]}),le.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[le.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Penempatan"}),le.jsx("p",{className:"text-sm text-green-700",children:"Halaman Utama"}),le.jsx("p",{className:"text-xs text-green-600",children:"Di atas semua produk"})]})]}),le.jsxs("button",{onClick:()=>$(!0),className:"bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition-colors flex items-center space-x-2 mx-auto",children:[le.jsx(u,{className:"w-5 h-5"}),le.jsx("span",{children:"Kelola Produk Unggulan"})]})]})}),"flashsale"===o&&"owner"===(null==s?void 0:s.role)&&le.jsx("div",{className:"space-y-4",children:le.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 text-center",children:[le.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Kelola Flash Sale"}),le.jsx("p",{className:"text-gray-600 mb-6",children:"Buat dan kelola flash sale untuk meningkatkan penjualan"}),le.jsx("button",{onClick:()=>E(!0),className:"bg-red-500 text-white px-6 py-3 rounded-lg hover:bg-red-600 transition-colors",children:"Buka Kelola Flash Sale"})]})})]})]})},De=({currentPage:e,onPageChange:s})=>{const a=[{id:"home",label:"Beranda",icon:ee},{id:"flash-sale",label:"Flash Sale",icon:$},{id:"orders",label:"Pesanan",icon:R},{id:"account",label:"Akun",icon:y}];return le.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg",children:le.jsx("div",{className:"flex",children:a.map(a=>{const t=a.icon,l=e===a.id;return le.jsxs("button",{onClick:()=>s(a.id),className:"flex-1 flex flex-col items-center py-3 px-2 transition-colors "+(l?"text-pink-600 bg-pink-50":"text-gray-600 hover:text-pink-600 hover:bg-gray-50"),children:[le.jsx(t,{className:"w-6 h-6 mb-1 "+(l?"text-pink-600":"text-gray-600")}),le.jsx("span",{className:"text-xs font-medium "+(l?"text-pink-600":"text-gray-600"),children:a.label})]},a.id)})})})};function Ae(){const[e,s]=m.useState("home"),[a,t]=m.useState(null),[l,r]=m.useState(!1),[i,n]=m.useState(null),[c,x]=m.useState([]),{products:h,loading:u,updateProductStock:p}=ke(),{addOrder:g}=oe(),b=e=>{t(e),s("product-detail")},j=()=>{r(!0)},f=e=>{r(!1),n(e),console.log("User logged in:",e)},N=()=>{console.log("User logging out"),n(null),x([]),s("home")},y=(e,s,a)=>{const t=d(o({},e),{selectedVariant:s,quantity:a,cartId:`${e.id}-${null==s?void 0:s.size}-${null==s?void 0:s.color}`});x(l=>{const r=l.findIndex(a=>{var t,l;return a.id===e.id&&(null==(t=a.selectedVariant)?void 0:t.size)===(null==s?void 0:s.size)&&(null==(l=a.selectedVariant)?void 0:l.color)===(null==s?void 0:s.color)});if(r>=0){const e=[...l];return e[r].quantity+=a,e}return[...l,t]}),alert("Produk berhasil ditambahkan ke keranjang!")},v=e=>{if(!i)return void j();const s={size:e.variants.sizes[0],color:e.variants.colors[0]};y(e,s,1)},w=(e,a,t)=>{i?(y(e,a,t),setTimeout(()=>{s("checkout")},500)):j()},k=(e,s,a)=>{x(t=>t.map(t=>{var l,r;return t.id===e&&(null==(l=t.selectedVariant)?void 0:l.size)===(null==s?void 0:s.size)&&(null==(r=t.selectedVariant)?void 0:r.color)===(null==s?void 0:s.color)?d(o({},t),{quantity:Math.max(1,a)}):t}))},S=(e,s)=>{x(a=>a.filter(a=>{var t,l;return!(a.id===e&&(null==(t=a.selectedVariant)?void 0:t.size)===(null==s?void 0:s.size)&&(null==(l=a.selectedVariant)?void 0:l.color)===(null==s?void 0:s.color))}))},P=e=>{const s="AZF"+Date.now().toString().slice(-8);return g({id:s,userId:i.id,userName:i.name,userEmail:i.email,items:c.map(e=>({productId:e.id,productName:e.name,selectedVariant:e.selectedVariant,quantity:e.quantity,price:"reseller"===(null==i?void 0:i.role)?e.resellerPrice:e.retailPrice,total:("reseller"===(null==i?void 0:i.role)?e.resellerPrice:e.retailPrice)*e.quantity})),shippingInfo:e.shippingInfo,paymentMethod:e.paymentMethod,status:"pending",totalAmount:C(),shippingCost:15e3,finalTotal:C()+15e3,notes:e.notes}),c.forEach(e=>{p(e.id,e.quantity)}),x([]),s},C=()=>c.reduce((e,s)=>e+("reseller"===(null==i?void 0:i.role)?s.resellerPrice:s.retailPrice)*s.quantity,0),D=()=>{s("cart")},A=()=>{s("checkout")},T=()=>{s("flash-sale")};return le.jsx(de,{children:le.jsxs("div",{className:"min-h-screen bg-gray-50",children:[(()=>{if(l)return le.jsx(je,{onSuccess:f,onClose:()=>r(!1)});switch(e){case"home":default:return le.jsx(xe,{user:i,cartItems:c,products:h,loading:u,onProductClick:b,onLoginRequired:j,onCartClick:D,onAddToCart:v,onNavigateToFlashSale:T});case"flash-sale":return le.jsx(Ne,{user:i,cartItems:c,products:h,loading:u,onProductClick:b,onLoginRequired:j,onCartClick:D,onAddToCart:v});case"orders":return le.jsx(ye,{user:i});case"account":return console.log("App: Rendering AccountPage with user:",i),le.jsx(ve,{user:i,onLogout:N,onNavigateToAdmin:()=>s("admin-dashboard")});case"admin-dashboard":return console.log("App: Rendering AdminDashboard with user:",i),le.jsx(Ce,{onBack:()=>s("account"),user:i});case"product-detail":return le.jsx(he,{product:a,user:i,onBack:()=>s("home"),onLoginRequired:j,onAddToCart:y,onBuyNow:w,onNavigateToCart:()=>s("cart")});case"cart":return le.jsx(ue,{cartItems:c,user:i,updateQuantity:k,removeFromCart:S,getTotalPrice:C,onBack:()=>s("home"),onCheckout:A});case"checkout":return le.jsx(be,{cartItems:c,user:i,getTotalPrice:C,clearCart:P,onBack:()=>s("cart")})}})(),!l&&"admin-dashboard"!==e&&le.jsx(De,{currentPage:e,onPageChange:s})]})})}function Te(){return le.jsx(ne,{children:le.jsx(Ae,{})})}te(document.getElementById("root")).render(le.jsx(m.StrictMode,{children:le.jsx(Te,{})}))}},function(){return ae||(0,se[t(se)[0]])((ae={exports:{}}).exports,ae),ae.exports});export default te();
